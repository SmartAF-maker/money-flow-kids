     /* ========= Money Flow Kids — modern CSS refresh (2025, dedup) ========= */

/* Palette */
:root{
  --bg:#0f172a; --card:#111827; --ink:#e5e7eb; --muted:#9ca3af;
  --ok:#22c55e; --warn:#ef4444; --accent:#3b82f6;
  --bg-2:#0b1220; --ring:#93c5fd; --border-c:#1f2937; --panel-b:#2b3a55; --accent-2:#60a5fa;
  --grad-btn:linear-gradient(135deg,#3b82f6 0%,#22c55e 100%);
  --grad-btn-2:linear-gradient(135deg,#60a5fa 0%,#3b82f6 55%,#22c55e 100%);
  --grad-danger:linear-gradient(135deg,#ef4444,#f97316);
  --r-lg:14px; --r-md:10px; --shadow-1:0 1px 0 rgba(0,0,0,.18); --shadow-2:0 10px 30px rgba(2,8,23,.35);
}

/* Reset / base */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Arial,Helvetica,"Apple Color Emoji","Segoe UI Emoji";
  background:var(--bg); color:var(--ink); line-height:1.45;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}

/* Cinematic bg */
body::before,body::after{
  content:""; position:fixed; inset:-20vmax; z-index:-2;
  background:
    radial-gradient(40vmax 40vmax at 12% 18%, rgba(59,130,246,.18), transparent 60%),
    radial-gradient(36vmax 36vmax at 80% 10%, rgba(34,197,94,.14), transparent 60%),
    radial-gradient(46vmax 46vmax at 70% 80%, rgba(59,130,246,.12), transparent 60%),
    radial-gradient(30vmax 30vmax at 10% 85%, rgba(34,197,94,.10), transparent 60%);
  filter:blur(30px) saturate(120%); pointer-events:none;
}
body::after{inset:0; z-index:-1; background-image:linear-gradient(180deg, rgba(16,24,40,0), rgba(2,8,23,.35));}

/* Topbar */
.topbar{
  position:sticky; top:0; z-index:50; display:flex; justify-content:space-between; align-items:center; gap:10px;
  padding:14px 20px; background:color-mix(in srgb, var(--bg-2) 82%, transparent);
  border-bottom:1px solid var(--border-c);
  backdrop-filter:saturate(140%) blur(8px); -webkit-backdrop-filter:saturate(140%) blur(8px);
  flex-wrap:nowrap;
}
h1{margin:0; font-size:22px; letter-spacing:.2px}
#t-appTitle{background:var(--grad-btn); -webkit-background-clip:text; background-clip:text; color:transparent}
.container{max-width:1120px; margin:20px auto; padding:0 16px}

/* Pills / tabs / selects in role-switch */
.role-switch{display:flex; align-items:center; gap:8px; flex-wrap:wrap}
.role-switch .tab, .role-switch select{
  background:linear-gradient(180deg,#0e162a,#0a1223);
  border:1px solid var(--panel-b); color:var(--ink); padding:8px 12px; border-radius:var(--r-md);
  cursor:pointer; box-shadow:var(--shadow-1);
  transition:transform .15s ease, border-color .2s ease, box-shadow .2s ease, filter .2s ease;
}
.role-switch .tab:hover, .role-switch select:hover{transform:translateY(-1px); border-color:#3a4f77}
.role-switch .active{background:var(--grad-btn-2); border-color:transparent; color:#0b1220; font-weight:700}

/* Auth mini-bar */
.authwrap{display:inline-flex; align-items:center; gap:8px; margin-left:8px}
.authwrap .tab{background:linear-gradient(180deg,#0e162a,#0a1223); border:1px solid var(--panel-b)}

/* Generic buttons (unified, no dups) */
button, .btn, .role-switch .tab, .authwrap .tab{
  position:relative; transform:translateY(0); color:var(--ink); font-weight:600;
  padding:10px 16px; border:1px solid rgba(255,255,255,.25); border-radius:12px;
  background:linear-gradient(135deg, rgba(59,130,246,.6), rgba(34,197,94,.6));
  backdrop-filter:blur(6px) saturate(140%); -webkit-backdrop-filter:blur(6px) saturate(140%);
  box-shadow:0 4px 12px rgba(255,255,255,.15), inset 0 1px 0 rgba(255,255,255,.25);
  cursor:pointer; transition:transform .15s ease, box-shadow .15s ease, background .15s ease, filter .2s ease;
  border:0;
}
button:hover, .btn:hover, .role-switch .tab:hover, .authwrap .tab:hover{
  transform:translateY(-2px);
  background:linear-gradient(135deg, rgba(59,130,246,.75), rgba(34,197,94,.75));
  box-shadow:0 6px 18px rgba(255,255,255,.25), inset 0 1px 0 rgba(255,255,255,.3);
}
button:active, .btn:active, .role-switch .tab:active, .authwrap .tab:active{
  transform:translateY(2px);
  background:linear-gradient(135deg, rgba(59,130,246,.55), rgba(34,197,94,.55));
  box-shadow:0 2px 6px rgba(255,255,255,.15), inset 0 1px 0 rgba(255,255,255,.2);
}
.btn{padding:10px 14px; border-radius:var(--r-md)}
.btn.primary{background:var(--grad-btn-2); color:#081225}
.btn.danger{background:var(--grad-danger); color:#0b1220}

/* Inputs / selects */
input, select, button{font:inherit; color:inherit}
input, select{
  padding:10px 12px; border-radius:var(--r-md); border:1px solid var(--panel-b);
  background:#0c1528; color:var(--ink);
  transition:border-color .2s ease, box-shadow .2s ease;
}
input:focus-visible, select:focus-visible{
  outline:none; border-color:var(--ring);
  box-shadow:0 0 0 3px color-mix(in srgb, var(--ring) 35%, transparent);
}
select, .role-switch select{
  background:rgba(15,23,42,.8); border:1px solid rgba(255,255,255,.2);
  border-radius:10px; padding:8px 12px; appearance:none; cursor:pointer;
  backdrop-filter:blur(6px) saturate(130%); -webkit-backdrop-filter:blur(6px) saturate(130%);
}
select option{background:var(--card); color:var(--ink)}
.input{width:140px}

/* Grids */
.grid.g-3 {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

@media (max-width: 1000px) {
  .grid.g-3 {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 600px) {
  .grid.g-3 {
    grid-template-columns: 1fr;
  }
}


/* Cards */
.card{
  background:color-mix(in srgb, var(--card) 86%, transparent);
  border:1px solid var(--border-c); border-radius:var(--r-lg); box-shadow:var(--shadow-2);
  padding:16px; backdrop-filter:blur(8px) saturate(140%); -webkit-backdrop-filter:blur(8px) saturate(140%);
  transition:box-shadow .25s ease;
}
.card:hover{box-shadow:0 0 0 1px rgba(147,197,253,.10), var(--shadow-2)}
.jars .card{background:linear-gradient(180deg, rgba(15,23,42,.9), rgba(11,18,32,.9))}

.title{font-weight:800; margin:0 0 8px; letter-spacing:.2px}
.muted{color:var(--muted)}
.big{font-size:30px; font-weight:900; letter-spacing:.2px}

/* Helpers */
.space,.row{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
.right{margin-left:auto}
.hidden{display:none !important}

/* Table */
.tableWrap{border:1px solid var(--border-c); border-radius:10px; overflow:hidden}
.tableWrap table{min-width:480px}
.tableWrap{overflow-x:auto}
table{width:100%; border-collapse:separate; border-spacing:0; font-size:14px}
th,td{padding:10px; text-align:left; border-top:1px solid var(--border-c)}
thead th{position:sticky; top:0; background:#0f172acc; backdrop-filter:blur(6px)}
tbody tr:nth-child(odd) td{background:rgba(255,255,255,.02)}
.pnl-pos{color:var(--ok)} .pnl-neg{color:var(--warn)}

/* Toast */
.toast{
  position:fixed; inset:72px auto auto 50%; transform:translateX(-50%);
  background:var(--bg-2); color:#fff; padding:10px 14px; border-radius:var(--r-lg);
  box-shadow:var(--shadow-2); z-index:60;
}

/* KPIs */
.kpis .kpi{background:color-mix(in srgb, var(--bg-2) 92%, transparent); border:1px solid var(--border-c); border-radius:10px; padding:12px}

/* Stock / FX list cards */
.stock,.fxpair{
  display:block; width:100%; text-align:left; border:1px solid var(--panel-b); border-radius:12px;
  padding:10px 12px; background:#0c1528; cursor:pointer; color:var(--ink); font-weight:500;
  transition:border-color .2s ease, transform .15s ease;
}
.stock:hover,.fxpair:hover{transform:translateY(-1px); border-color:#3a4f77}
.stock .muted,.fxpair .muted{color:var(--muted)}
.stock.active,.fxpair.active{outline:2px solid var(--accent-2); outline-offset:0}

/* Switch */
.switch{position:relative; display:inline-block; width:56px; height:30px; margin-left:10px}
.switch input{opacity:0; width:0; height:0}
.slider{position:absolute; inset:0; cursor:pointer; background:#334155; border-radius:40px; transition:.2s}
.slider::before{
  content:""; position:absolute; height:24px; width:24px; left:3px; top:3px;
  border-radius:50%; background:radial-gradient(circle at 30% 30%, #fff, #d1d5db); box-shadow:0 1px 2px rgba(0,0,0,.2); transition:.2s
}
input:checked + .slider{background:linear-gradient(135deg,#22c55e,#16a34a)}
input:checked + .slider::before{transform:translateX(26px)}

/* Modal */
.modal{position:fixed; inset:0; background:rgba(0,0,0,.55); display:flex; justify-content:center; align-items:center; z-index:999; padding:16px}
.modal.hidden{display:none !important}
.modal-content{
  background:color-mix(in srgb, var(--card) 90%, transparent); color:var(--ink);
  padding:20px; border-radius:var(--r-lg); width:min(900px,92vw); max-height:min(92vh,900px); overflow:auto;
  box-shadow:var(--shadow-2); backdrop-filter:blur(8px) saturate(140%)
}
@media (max-height:700px){ .modal-content{max-height:88vh} }
.tut-head{display:flex; gap:12px; align-items:flex-start; margin-bottom:12px}
.tut-icon{width:44px; height:44px; border-radius:10px; display:grid; place-items:center; font-size:24px; background:var(--bg-2); border:1px solid var(--border-c)}
.tut-image-wrap{margin:12px 0 6px; padding:10px; background:var(--bg-2); border:1px solid var(--border-c); border-radius:10px}
.tut-image-wrap img{display:block; width:100%; height:auto; border-radius:8px; max-height:56vh; object-fit:contain}
.tutorial-controls{margin-top:14px; display:flex; gap:8px; justify-content:flex-end}

/* Tutorial controls pinned top-right inside modal */
#tutorialModal .tutorial-controls{position:absolute; top:12px; right:12px; display:flex; gap:8px; z-index:10}
#tutorialModal .tutorial-controls button{
  background:#1f2937; border:1px solid #334155; border-radius:6px; padding:6px 10px; color:#fff; font-size:16px; cursor:pointer; transition:background .2s ease
}
#tutorialModal .tutorial-controls button:hover{background:#334155}
#tutorialText{white-space:pre-line}
.tut-big{font-size:18px; line-height:1.6}

/* Trends */
.trend-list{display:grid; grid-template-columns:repeat(auto-fit, minmax(220px,1fr)); gap:8px; margin-top:8px}
.trend-item{background:#0b1220aa; border:1px solid var(--border-c); border-radius:10px; padding:10px; backdrop-filter:blur(6px)}
.trend-head{display:flex; justify-content:space-between; align-items:center; font-weight:700}
.trend-sub{margin-top:4px; font-size:12px; color:var(--muted)}

/* Scrollbar (Chromium/WebKit) */
*::-webkit-scrollbar{height:10px; width:10px}
*::-webkit-scrollbar-track{background:var(--bg-2)}
*::-webkit-scrollbar-thumb{background:#1f2a44; border-radius:10px}
*::-webkit-scrollbar-thumb:hover{background:#2c3a5e}

/* A11y / motion */
:focus-visible{outline:3px solid color-mix(in srgb, var(--ring) 55%, transparent); outline-offset:2px}
[aria-disabled="true"], .disabled{opacity:.6; pointer-events:none}
@media (prefers-reduced-motion:reduce){
  *,*::before,*::after{transition-duration:.01ms !important; animation-duration:.01ms !important; animation-iteration-count:1 !important}
}

/* Topbar text color for tabs/buttons */
.topbar .tab, .authwrap .tab{color:var(--ink) !important}

/* --- Jar cards (layout only; SVG animacje masz inline w HTML) --- */
.jar-card{display:flex; flex-direction:column; align-items:center; gap:6px; text-align:center}
.jar-card .title{font-variant-numeric:tabular-nums}


/* Photo jars (PNG mask) */
.jar2{position:relative; width:160px; aspect-ratio:1/1.25; filter:drop-shadow(0 6px 12px rgba(0,0,0,.35)); transition:transform .2s ease, filter .2s ease}
.jar2:hover{transform:translateY(-1px); filter:drop-shadow(0 10px 20px rgba(0,0,0,.4))}
.jar2 .jar-img{position:relative; width:100%; height:100%; display:block; pointer-events:none}
.jar2 .liquid{
  position:absolute; inset:0;
  -webkit-mask:url("./jar-empty.png") center/contain no-repeat; mask:url("./jar-empty.png") center/contain no-repeat;
  display:flex; align-items:flex-end; overflow:hidden;
}
.jar2 .liquid::before{
  content:""; width:100%; height:var(--fill,0%);
  background:linear-gradient(180deg, var(--liq-top,#41d98a), var(--liq-bottom,#00c853));
  opacity:.95; border-radius:8% 8% 16% 16% / 20% 20% 30% 30%;
}
/* Savings → ice blue */
.jar2.savings{ --liq-top:#99ffff; --liq-bottom:#99ffff; }
.jar2.savings .liquid::before{
  background: linear-gradient(180deg,#99ffff,#99ffff);
}
.jar2.earnings{--liq-top:#eef131; --liq-bottom:#ff9800}
.jar2.donations{--liq-top:#c03065; --liq-bottom:#e91e63}
.jar2.invest{--liq-top:#152a70; --liq-bottom:#3f51b5}
@media (max-width:520px){ .jar2{width:130px} }

/* Parent Panel: date input fix */
#tab-parent input[type="date"]{color:var(--ink); background-color:#0c1528}
#tab-parent input[type="date"]::-webkit-calendar-picker-indicator{filter:invert(1); cursor:pointer}

/* FX list collapsed hint gradient */
#fxList.is-collapsed{position:relative}
#fxList.is-collapsed::after{
  content:""; position:absolute; left:0; right:0; bottom:0; height:48px; pointer-events:none;
  background:linear-gradient(to bottom, rgba(15,23,42,0) 0%, rgba(15,23,42,.9) 60%, rgba(15,23,42,1) 100%);
  border-bottom-left-radius:inherit; border-bottom-right-radius:inherit;
}

/* ===== Responsive layout for market/portfolio tabs (clean, no conflicts) ===== */
#tab-invest, #tab-fx{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(560px, 1fr));
  gap:12px; align-items:start;
}
#tab-invest > .card, #tab-fx > .card{min-width:0}
#stockList, #fxList, #tab-invest .row, #tab-fx .row{min-width:0; overflow:hidden}
#tab-invest .tableWrap, #tab-fx .tableWrap{overflow-x:auto}
@media (max-width:1400px){
  #tab-invest, #tab-fx{grid-template-columns:1fr}
}

/* Laptop-tight topbar */
@media (max-width:1440px) and (min-width:900px){
  .topbar{padding:10px 14px; gap:8px}
  .topbar h1, #t-appTitle{font-size:18px}
  .topbar .tab, .topbar button, .topbar select{padding:8px 12px}
  #tutorialBtn{padding:8px 12px; min-width:auto}
  .topbar .roleLabel{display:none}
}
/* === STOCK & FX: 2 kolumny tylko gdy sekcja jest widoczna === */
section#tab-invest:not(.hidden),
section#tab-fx:not(.hidden) {
  display: grid;
  grid-template-columns: minmax(460px, 1fr) minmax(460px, 1fr);
  gap: 12px;
  align-items: start;
}

/* karty i zawartość nie rozsadzają kolumn */
section#tab-invest > .card,
section#tab-fx > .card {
  min-width: 0;
}

#stockList,
#fxList,
#tab-invest .row,
#tab-fx .row {
  min-width: 0;
  overflow: hidden;
}

/* tabele przewijają się poziomo */
#tab-invest .tableWrap,
#tab-fx .tableWrap {
  overflow-x: auto;
}

/* na wąskich ekranach 1 kolumna */
@media (max-width: 900px) {
  section#tab-invest:not(.hidden),
  section#tab-fx:not(.hidden) {
    grid-template-columns: 1fr;
  }
}

/* opcjonalnie: więcej miejsca na 2 kolumny */
.container { max-width: 1280px; }
/* ==== LAPTOP HEADER FIX (1366–1440) ==== */

/* 1) topbar nie może się łamać, a środek może się zwężać */
.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  flex-wrap:nowrap !important;
  padding:10px 14px;  /* ciaśniej jak na 2. screenie */
}
.topbar > *{ flex:0 0 auto; }                 /* nic nie rozpycha w bok */
.topbar .role-switch{
  flex:1 1 auto; min-width:0;                 /* środek może się zwężać */
  display:flex; align-items:center; gap:8px;
  flex-wrap:nowrap !important;                /* zero zawijania kapsułek */
}

/* 2) kompaktowe kapsułki (rozmiar jak na 2. screenie) */
.topbar .tab,
.topbar button,
.topbar select{
  padding:8px 12px !important;
  font-size:14px !important;
  white-space:nowrap;
}

/* 3) "Tutorial" zawsze w tym samym rzędzie i nie znika */
#tutorialBtn{
  display:inline-flex !important;
  align-items:center;
  padding:8px 12px !important;
  min-width:auto !important;
  order: 90;                                   /* ustaw na koniec grupy tabsów */
}

/* 4) drobna kosmetyka: badge 'Parent' nie pcha nic na dół */
#authBadge{ white-space:nowrap; }

/* 5) bezpieczeństwo – nic się nie wysunie poza topbar */
.topbar, .role-switch{ overflow:hidden; }
/* ==== TOPBAR: stałe wyśrodkowanie przycisków (desktop + laptop) ==== */
/* Zamiast flex → 3-kolumnowy grid: [logo] [przyciski] [logout] */
.topbar{
  display:grid !important;
  grid-template-columns: auto 1fr auto;   /* lewa, środek, prawa */
  align-items:center;
  gap:12px;
}

/* Logo / tytuł po lewej, bez wpływu na centrum */
.topbar h1,
#t-appTitle{
  justify-self:start;
  margin:0;
}

/* Cały „role-switch” (przyciski: EN, Child, Add child, Stocks, FX, Profits, Parent, Tutorial) w centrum */
.topbar .role-switch{
  justify-self:center;
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap:nowrap;          /* NIC nie zawija się na laptopach */
  min-width:0;               /* pozwala się zawężać */
}

/* Prawa część (badge + Logout) trzyma się prawej krawędzi */
.topbar .authwrap{
  justify-self:end;
  margin-left:0;
}

/* Zapobiegaj znikaniu „Tutorial” – przywróć label na większych ekranach */
@media (min-width: 900px){
  #tutorialBtn span{ display:inline !important; }
}

/* Gdy już bardzo wąsko (tablety itp.) – pozwól na zawijanie i rozdziel rzędy */
@media (max-width: 899.98px){
  .topbar{
    grid-template-columns: 1fr;   /* jeden pas */
    row-gap:10px;
  }
  .topbar .role-switch{
    justify-self:stretch;
    justify-content:center;
    flex-wrap:wrap;               /* teraz może się zawijać */
  }
  .topbar .authwrap{ justify-self:center; }
}
.kpi-box {
  background: #111827;
  border-radius: 10px;
  padding: 12px 16px;
  text-align: center;
  min-width: 160px;
  border: 2px solid transparent;
}

.kpi-box .kpi-label {
  font-size: 14px;
  color: var(--muted);
  margin-bottom: 4px;
}

.kpi-box .kpi-value {
  font-size: 20px;
  font-weight: bold;
  color: var(--ink);
}

.kpi-box.earned {
  border-color: #22c55e;
}

.kpi-box.earned .kpi-value {
  color: #22c55e;
}

.kpi-box.loss {
  border-color: #ef4444;
}

.kpi-box.loss .kpi-value {
  color: #ef4444;
}
/* Zielone dla Total earned */
#kpiTotal {
  color: #22c55e; /* zielony */
  font-weight: bold;
}

/* Czerwone dla Total loss */
#kpiTotalLoss {
  color: #ef4444; /* czerwony */
  font-weight: bold;
}
td.space {
  display: flex;
  align-items: center;
  justify-content: flex-start; /* zamiast space-between */
  gap: 8px;
}
/* było: #tab-invest, #tab-fx, #tab-parent */
#tab-invest,
#tab-fx,
#tab-profits,   /* ⬅️ dodane */
#tab-parent {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(560px, 1fr));
  gap: 12px;
  align-items: start;
}

/* i w media query dopisz profits */
/* Siatka kart (4 sekcje) */
#tab-invest,
#tab-fx,
#tab-profits,
#tab-parent {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(560px, 1fr));
  gap: 12px;
  align-items: start;
}

/* 1 kolumna gdy wąsko */
@media (max-width: 1400px){
  #tab-invest,
  #tab-fx,
  #tab-profits {
    grid-template-columns: 1fr;
  }
}

/* Profits – siatka KPI */
#tab-profits .kpi-grid{
  display:grid;
  grid-template-columns:repeat(3, minmax(240px, 1fr));
  gap:12px;
}
@media (max-width: 1200px){ #tab-profits .kpi-grid{ grid-template-columns:repeat(2,1fr); } }
@media (max-width: 720px){  #tab-profits .kpi-grid{ grid-template-columns:1fr; } }
#tab-profits .kpi-card .muted{ font-size:14px; }
#tab-profits .kpi-card .value{ font-size:26px; font-weight:700; }

/* KPI prefixes */
#kpiTotal::before { content: "+ "; font-weight: 700; }
#kpiTotalLoss::before { content: "− "; font-weight: 700; }
.available-cash {
  background-color: var(--card);
  border-radius: var(--r-lg);
  padding: 16px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  color: var(--ink);
  font-size: 1rem;
  margin: 0 16px; /* odstęp między Net Worth a Quick Actions */
}

.available-cash h3 {
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 8px;
}
/* ==== MINI JARS – sticky pasek pod topbarem (pełna szerokość) ==== */
:root{
  --topbar-h: 56px;   /* dostosuj jeśli zmienisz wysokość topbara */
}

/* sam pasek jest sticky i ma tło na CAŁĄ szerokość, tak jak topbar */
#stickyMiniJars{
  position: sticky;
  top: var(--topbar-h);
  z-index: 100; /* wyżej niż karty */
  width: 100%;
  background: color-mix(in srgb, var(--bg-2) 92%, transparent);
  backdrop-filter: blur(8px) saturate(140%);
  -webkit-backdrop-filter: blur(8px) saturate(140%);
  border-bottom: 1px solid var(--border-c);

  /* UWAGA: sekcja #stickyMiniJars W TWOIM HTML ma klasę .mini-jars,
     więc SIATKĘ ustawiamy bezpośrednio na #stickyMiniJars */
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 16px;
  align-items: center;

  /* padding jak w topbarze, żeby wyglądały identycznie na szerokość */
  padding: 14px 20px;
}

/* elementy w pasku */
.mini-jar{ text-align: center; }
.mini-jar-label{ font-size: 12px; color: var(--muted); }
.mini-jar-value{
  font-size: 18px;
  font-weight: 800;
  font-variant-numeric: tabular-nums;
}

/* kolory wartości */
#miniSave  { color:#15f4ee; }
#miniSpend { color:#f59e0b; }
#miniGive  { color:#ec4899; }
#miniInvest{ color:#60a5fa; }

/* RWD – ten sam układ co wcześniej */
@media (max-width: 900px){
  #stickyMiniJars{ grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 500px){
  #stickyMiniJars{ grid-template-columns: 1fr; }
}
/* ==== [OVERRIDE] Topbar + Mini Jars zawsze widoczne, pełna szerokość ==== */
:root{
  /* jeżeli zmienisz wizualnie wysokości, zaktualizuj te 2 zmienne */
  --topbar-h: 56px;     /* wysokość topbara */
  --minijars-h: 64px;   /* wysokość paska mini-jarów */
}

/* odsuń treść, żeby nie chowała się pod dwoma fixed paskami */
body{
  padding-top: calc(var(--topbar-h) + var(--minijars-h) + 12px);
}

/* TOPBAR na pełną szerokość, zawsze przyklejony do góry */
.topbar{
  position: fixed !important;
  top: 0; left: 0; right: 0;
  z-index: 300;                       /* ponad kartami/tabelami */
  padding: 14px 20px;
  background: color-mix(in srgb, var(--bg-2) 82%, transparent);
  border-bottom: 1px solid var(--border-c);
  backdrop-filter: saturate(140%) blur(8px);
  -webkit-backdrop-filter: saturate(140%) blur(8px);

  /* układ 3-kolumnowy jak miałeś */
  display: grid !important;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 12px;
  height: var(--topbar-h);
  box-sizing: border-box;
}

/* MINI-JARS – też na pełną szerokość, tuż pod topbarem */
#stickyMiniJars{
  position: fixed !important;
  top: var(--topbar-h);
  left: 0; right: 0;
  z-index: 250;                       /* pod topbarem, nad treścią */
  height: var(--minijars-h);
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  align-items: center;
  gap: 16px;
  padding: 14px 20px;
  background: color-mix(in srgb, var(--bg-2) 92%, transparent);
  border-bottom: 1px solid var(--border-c);
  backdrop-filter: blur(8px) saturate(140%);
  -webkit-backdrop-filter: blur(8px) saturate(140%);
  box-sizing: border-box;
}

/* RWD dla mini-jars (jak wcześniej) */
@media (max-width: 900px){
  #stickyMiniJars{ grid-template-columns: repeat(2, 1fr); height: auto; }
}
@media (max-width: 500px){
  #stickyMiniJars{ grid-template-columns: 1fr; height: auto; }
}

/* nagłówki tabel sticky – żeby nie wjeżdżały pod paski */
thead th{
  position: sticky;
  top: calc(var(--topbar-h) + var(--minijars-h));
  z-index: 1;
}

/* na wszelki wypadek: żaden przodek nie psuje sticky/fixed overflowem */
html, body { overflow-x: hidden; }

/* kosmetyka: treści kontenera nie musisz ruszać, ale jak chcesz mieć
   identyczne „wejście” jak topbar/mini-jars, zostaw standardowe marginesy */
   /* ===== FIX: słoiki z powrotem w RZĘDZIE ===== */
.jars{
  display: grid !important;
  grid-auto-flow: row dense;
  grid-template-columns: repeat(4, minmax(240px, 1fr)) !important;
  gap: 16px;
  align-items: start;
  margin-top: 20px;
}
.jars > .card{
  min-width: 0;          /* nic nie rozszerza kolumny */
  width: auto !important;/* gdyby coś nadawało 100% */
}

/* laptop/tablet: 2 kolumny */
@media (max-width: 1200px){
  .jars{
    grid-template-columns: repeat(2, minmax(240px, 1fr)) !important;
  }
}

/* telefon: 1 kolumna */
@media (max-width: 640px){
  .jars{
    grid-template-columns: 1fr !important;
  }
}
/* ===== Mini-Jars kolorystyka ===== */
.mini-jars {
  display: flex;
  justify-content: space-around;
  padding: 8px 0;
  background: #0f172a; /* dopasowane do Twojego tła */
}
.mini-jar { text-align: center; }
.mini-jar-label { font-size: 0.9rem; color: #ccc; }
.mini-jar-amt { font-weight: bold; }

.mini-jar[data-key="availableCash"] .mini-jar-amt { color: #ffffff; }
.mini-jar[data-key="savings"]       .mini-jar-amt { color: #22c55e; }
.mini-jar[data-key="earnings"]      .mini-jar-amt { color: #f59e0b; }
.mini-jar[data-key="gifts"]         .mini-jar-amt { color: #ec4899; }
.mini-jar[data-key="investments"]   .mini-jar-amt { color: #3b82f6; }
/* ==== MINI JARS FIX: wszystkie w jednej linii ==== */
#stickyMiniJars,
.mini-jars.sticky {
  display: flex !important;
  justify-content: space-around;
  align-items: center;
  flex-wrap: nowrap !important; /* nie zawija */
  gap: 20px;
}

#stickyMiniJars .mini-jar,
.mini-jars.sticky .mini-jar {
  text-align: center;
  min-width: 120px; /* żeby nie ściskało */
}
/* 1) Karta z kontrolkami (Buy/inputs) ma być ponad sticky nagłówkiem tabeli */
#tab-fx > .card:first-child,
#tab-invest > .card:first-child {
  position: relative;
  z-index: 10;
}

/* 2) Samo pudełko z transakcją i kontrolki dodatkowo nad tabelą */
#fxTradeBox,
#tradeBox,
#stockControls,
#fxList,
#stockList {
  position: relative;
  z-index: 10;
}

/* 3) Tabela: niższy stacking + brak przechwytywania klików przez nagłówek */
.tableWrap { position: relative; z-index: 0; overflow-x: auto; }
thead { pointer-events: none; }
thead th {
  position: sticky;
  top: calc(var(--topbar-h) + var(--minijars-h));
  z-index: 1;
  background: #0f172acc;
}
thead th * { pointer-events: auto; }

/* 4) Na wszelki wypadek – dodatkowy odstęp poniżej tabeli */
.tableWrap { margin-bottom: 24px; }
/* === HOTFIX: pasek nie zasłania wiersza z przyciskami === */

/* 1) Mini-jars wracają do STICKY (nie fixed) */
#stickyMiniJars{
  position: sticky !important;
  top: var(--topbar-h);
  z-index: 200;
  height: auto !important;
}

/* 2) Body liczy tylko topbar, nie mini-jars */
body{
  padding-top: calc(var(--topbar-h) + 12px) !important;
}

/* 3) Nagłówki tabel kleją się tylko do topbara */
thead th{
  position: sticky !important;
  top: var(--topbar-h) !important;
  z-index: 1;
  background: #0f172acc;
}

/* 4) Odstęp i brak ucinania pod tabelą (żeby przyciski miały miejsce) */
.tableWrap{
  margin-bottom: 20px;
  overflow-x: auto;
  overflow-y: visible;
}
/* === FINAL FIX (wklej na koniec CSS) === */

/* 1) Pasek top i mini-jars bez przerwy – oba fixed */
:root{ --topbar-h:56px; --minijars-h:64px; }

.topbar{
  position: fixed !important;
  top: 0; left: 0; right: 0;
  z-index: 300;
  height: var(--topbar-h);
}

#stickyMiniJars{
  position: fixed !important;
  top: var(--topbar-h);
  left: 0; right: 0;
  z-index: 250;
  height: var(--minijars-h);
  margin: 0 !important;
}

/* 2) Treść odsunięta dokładnie o wysokość obu pasków */
body{
  padding-top: calc(var(--topbar-h) + var(--minijars-h)) !important;
}

thead th{
  position: sticky !important;
  top: calc(var(--topbar-h) + var(--minijars-h)) !important;
  z-index: 1;
  background: #0f172acc;
}

.tableWrap{ position: relative; z-index: 0; overflow-x: auto; margin-bottom: 20px; }
.tableWrap + .row,
.tableWrap + .actions,
.tableWrap + .buttons{
  position: relative;
  z-index: 10;
}#tab-fx .tableWrap thead th,
#tab-invest .tableWrap thead th{
  position: static !important;
  top: auto !important;
  z-index: auto !important;
  backdrop-filter: none !important;
  background: transparent !important;
}
#tab-fx .tableWrap,
#tab-invest .tableWrap{
  overflow-x: auto;
  overflow-y: visible;
  margin-bottom: 20px;
}
#tab-fx th,
#tab-invest th {
  white-space: nowrap !important;
  text-align: center;
  vertical-align: middle;
  padding: 8px 12px;
}

#tab-fx td,
#tab-invest td {
  white-space: nowrap !important;
  text-align: center;
  vertical-align: middle;
  padding: 8px 12px;
}

/* ——— Komórka z przyciskami: jeden rząd, brak zawijania ——— */
#tab-fx td.space,
#tab-fx td.actions {
  display: flex !important;
  align-items: center;
  gap: 8px;
  white-space: nowrap !important;
}

#tab-fx td.space > *,
#tab-fx td.actions > * {
  flex: 0 0 auto;         /* nic się nie rozciąga i nie łamie */
}

/* ——— Węższe pole ilości, żeby zmieścić przyciski ——— */
#tab-fx input[type="number"],
#tab-fx input.qty,
#tab-fx .input {
  width: 72px !important;
  min-width: 72px !important;
}

/* ——— Drobne: komórki i nagłówki bez łamania, zwęż marginesy ——— */
#tab-fx th, #tab-fx td {
  white-space: nowrap !important;
  padding: 8px 10px;
}
/* === Make topbar & mini-jars identical transparency/background === */
:root{
  --bar-bg: color-mix(in srgb, var(--bg-2) 82%, transparent);
}

/* Top bar (bez zmiany wyglądu – tylko korzysta z tej samej zmiennej) */
.topbar{
  background: var(--bar-bg) !important;
  backdrop-filter: saturate(140%) blur(8px) !important;
  -webkit-backdrop-filter: saturate(140%) blur(8px) !important;
  border-bottom: 1px solid var(--border-c) !important;
}

/* Mini-jars pasek – dokładnie taki sam jak topbar */
#stickyMiniJars,
.mini-jars,
.mini-jars.sticky{
  background: var(--bar-bg) !important;
  backdrop-filter: saturate(140%) blur(8px) !important;
  -webkit-backdrop-filter: saturate(140%) blur(8px) !important;
  border-bottom: 1px solid var(--border-c) !important;
}
/* === Jars: input i +Add w jednej linii === */
.jar-actions{
  display:flex;
  flex-wrap:nowrap;
  align-items:center;
  justify-content:center;
  gap:8px;
}

.jar-actions .jar-input{
  width:100px;          /* ustaw swoją szerokość */
  flex:0 0 auto;        /* nie rozciąga się na 100% */
}

.jar-actions .btn{
  flex:0 0 auto;        /* nie rozciąga się */
  white-space:nowrap;   /* tekst się nie łamie */
}


/* if układ był kolumnowy, po usunięciu Maxa wyrównaj w jednej linii */
#tab-fx td.space,
#tab-invest td.space{
  display:flex !important;
  align-items:center;
  gap:8px;
  white-space:nowrap;
}
/* === STOCK PORTFOLIO = jak FX, bez scrolla === */
#tab-invest .tableWrap table{ min-width:0 !important; }     /* nie wymuszaj szerokości */
#tab-invest .tableWrap{ overflow-x:hidden; }                 /* i tak nie będzie potrzebny */

#tab-invest th,
#tab-invest td{
  white-space:nowrap !important;
  text-align:center;
  vertical-align:middle;
  padding:8px 10px;                                         /* tak samo jak w FX */
}

/* węższy input ilości jak w FX */
#tab-invest input[type="number"],
#tab-invest input.qty,
#tab-invest .input{
  width:72px !important;
  min-width:72px !important;
}

/* akcje w jednej linii */
#tab-invest td.space{
  display:flex !important;
  align-items:center;
  gap:8px;
  white-space:nowrap !important;
}

/* opcjonalnie: stałe proporcje kolumn, żeby ładnie się mieściło */
#tab-invest table{ table-layout:fixed; }
#tab-invest th:nth-child(1), #tab-invest td:nth-child(1){ width:12%; } /* Ticker   */
#tab-invest th:nth-child(2), #tab-invest td:nth-child(2){ width:8%;  } /* Shares   */
#tab-invest th:nth-child(3), #tab-invest td:nth-child(3){ width:15%; } /* Avg cost */
#tab-invest th:nth-child(4), #tab-invest td:nth-child(4){ width:15%; } /* Price    */
#tab-invest th:nth-child(5), #tab-invest td:nth-child(5){ width:15%; } /* Value    */
#tab-invest th:nth-child(6), #tab-invest td:nth-child(6){ width:15%; } /* P/L      */
#tab-invest th:nth-child(7), #tab-invest td:nth-child(7){ width:20%; } /* Qty+Sell */
/* === FIX: ostatnia kolumna w Stock Portfolio === */
#tab-invest td.space {
  display: flex !important;
  align-items: center;
  gap: 8px;
  justify-content: flex-start;
  white-space: nowrap;
  width: 100% !important;   /* ⬅️ pełna szerokość */
  box-sizing: border-box;
}

/* ostatnia kolumna w tabeli też ma sięgać do końca */
#tab-invest table th:last-child,
#tab-invest table td:last-child {
  width: auto !important;
}
/* ==== TOAST: zawsze nad mini-jars, na dole ekranu ==== */
.toast{
  position: fixed !important;
  left: 50% !important;
  bottom: calc(16px + env(safe-area-inset-bottom)) !important; /* iPhone notch-safe */
  transform: translateX(-50%) !important;
  z-index: 500 !important; /* topbar=300, mini-jars=250 -> toast ponad nimi */
  background: rgba(11,18,32,.95) !important;
  color: #fff !important;
  padding: 12px 16px !important;
  border-radius: 12px !important;
  border: 1px solid rgba(255,255,255,.12) !important;
  box-shadow: 0 10px 30px rgba(2,8,23,.45) !important;
  pointer-events: none; /* nie blokuje klików w UI */
  max-width: min(92vw, 560px);
  text-align: center;
  font-weight: 700;
}

/* opcjonalnie: delikatny fade-in/out */
.toast{ opacity: 0; transition: opacity .2s ease; }
.toast._show{ opacity: 1; }
/* ===== TOAST – reset pozycji i kompaktowy pasek na dole ===== */
.toast{
  position: fixed !important;

  /* resetuje stare "inset: 72px ..." */
  inset: auto !important;
  top: auto !important;
  right: auto !important;

  left: 50% !important;
  bottom: calc(16px + env(safe-area-inset-bottom)) !important;
  transform: translateX(-50%) !important;

  z-index: 1000 !important;             /* ponad topbarem/mini-jars */
  display: inline-block !important;     /* nie rozciąga się w pionie */
  max-width: min(92vw, 560px) !important;

  padding: 12px 16px !important;
  border-radius: 12px !important;
  background: rgba(11,18,32,.95) !important;
  color: #fff !important;
  border: 1px solid rgba(255,255,255,.12) !important;
  box-shadow: 0 10px 30px rgba(2,8,23,.45) !important;

  pointer-events: none !important;      /* nie blokuje klików */
  text-align: center;
  line-height: 1.3;

  opacity: 0;                           /* animacja */
  transition: opacity .25s ease;
}
.toast._show{ opacity: 1; }
/* ===== price arrows ===== */
.arrow-up   { color: #22c55e; }   /* zielony */
.arrow-down { color: #ef4444; }   /* czerwony */
.arrow-flat { color: #9ca3af; }   /* muted */
/* CHILD: ukryj slot (input + Add) pod słoikami */
body[data-role="child"] .jar-card .jar-actions { 
  display: none !important; 
}

/* (opcjonalnie) zlikwiduj nadmiar odstępu pod słoikami w child */
body[data-role="child"] .jar-card { 
  gap: 4px; 
}
body[data-role="child"] .jar-card .jar-actions { display:none !important; }
/* Profits → obszar przewijany dla historii, żeby sticky działał lokalnie */
#tab-profits .tableWrap{
  max-height: 260px;       /* możesz zmienić na swoją wysokość */
  overflow: auto;
  position: relative;
}

/* Sticky nagłówek – zawsze nad wierszami i z tłem */
#tab-profits .table thead th{
  position: sticky;
  top: 0;
  z-index: 5;
  background: var(--card, #0b1220); /* solidne tło, żeby nic nie prześwitywało */
}

/* Drobne wygładzenie przewijania i wysokości wierszy (opcjonalnie) */
#tab-profits .table tbody tr{ height: 36px; }
/* === PATCH: stabilne nagłówki i brak „zjadania” wierszy === */

/* 1) Domyślnie NIGDZIE nie rób globalnych sticky nagłówków */
.tableWrap thead th{
  position: static !important;
  top: auto !important;
  z-index: auto !important;
  backdrop-filter: none !important;
}

/* 2) PROFITs – lokalny scroll tylko dla historii + sticky w obrębie pudełka */
#tab-profits .tableWrap{
  max-height: 320px;        /* możesz zwiększyć/zmniejszyć */
  overflow: auto;           /* przewijane tylko w historii */
  position: relative;
}

#tab-profits .tableWrap thead th{
  position: sticky !important;
  top: 0 !important;        /* bo scrolluje .tableWrap, nie okno */
  z-index: 5;
  background: #0f172acc;    /* nieprzezroczyste tło pod topbarem */
  pointer-events: auto;     /* klik w sort/filtry jeśli masz */
}

/* 3) Market/Portfolio – zwykłe tabele, bez sticky (na wszelki wypadek) */
#tab-fx .tableWrap thead th,
#tab-invest .tableWrap thead th{
  position: static !important;
  top: auto !important;
  z-index: auto !important;
  background: transparent !important;
}

/* 4) Jedna definicja odsunięcia treści spod fixed topbar + mini-jars */
:root{ --topbar-h:56px; --minijars-h:64px; }
body{ padding-top: calc(var(--topbar-h) + var(--minijars-h)) !important; }
/* ===== Mobile baseline fixes (Money Flow Kids) ===== */

/* iOS/Android: brak poziomego przewijania i prawidłowe wypełnienie szerokości */
html, body {
  width: 100%;
  max-width: 100%;
  overflow-x: hidden;
}

/* Bezpieczne strefy + wygodna poduszka dołem (żeby CTA nie wpadały pod paski systemowe) */
:root{
  --header-h: 64px;             /* wysokość top baru – dopasuj jeśli inna */
  --page-pad: clamp(12px, 4vw, 20px);
}

body {
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  /* U góry damy pad w mainie – patrz niżej */
}

/* Top bar: trzymaj nad treścią i pozwól mu „przyklejać się” */
.topbar, .navbar, header.app-header {
  position: sticky;
  top: 0;
  z-index: 50;
  backdrop-filter: blur(8px);
}

/* Główna zawartość niech zaczyna się poniżej top baru */
main, .page, .content, #app {
  display: block;
  padding: calc(var(--header-h) + env(safe-area-inset-top)) var(--page-pad) calc(16px + env(safe-area-inset-bottom));
  box-sizing: border-box;
}

/* KPIs – pasek 'Available cash / Savings / Earnings' – elastycznie i bez łamania */
.kpis, .summary-strip, .top-metrics {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
}
@media (max-width: 720px) {
  .kpis, .summary-strip, .top-metrics { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 480px) {
  .kpis, .summary-strip, .top-metrics { grid-template-columns: 1fr; }
}

/* Karty: pilnujemy pełnej szerokości i przewiewów po bokach */
.card, .panel, .box {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* Siatki kart – bez wymuszania zbyt szerokich kolumn */
.grid, .cards, .sections {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
}
@media (max-width: 1024px){ .grid, .cards, .sections { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
@media (max-width: 560px) { .grid, .cards, .sections { grid-template-columns: 1fr; } }

/* Słoiki – SVG/obrazki muszą się skalować do kontenera */
.jar-svg, .jar-img, .jar canvas, .jar img {
  display: block;
  width: 100%;
  height: auto;
  max-width: 360px; /* opcjonalnie: niech nie rośnie ponad tę szerokość */
  margin-inline: auto;
}

/* Quick Actions – żeby przyciski nie wychodziły poza ekran */
.quick-actions, .actions {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}
@media (max-width: 480px) { .quick-actions, .actions { grid-template-columns: 1fr; } }

/* Global Trends – tabela przewijalna horyzontalnie na wąskich ekranach */
.global-trends, .stocks-table, .fx-table {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

/* Teksty w KPI – bez „rozpychania” */
.kpi .value, .kpi .title {
  word-wrap: break-word;
  overflow-wrap: anywhere;
}

/* Upewnij się, że żadne „container” nie mają sztywnego width > 100% */
.container, .wrap, .inner {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  box-sizing: border-box;
}

/* Częsty winowajca: margin/padding kolidujący z zaokrągleniami – ograniczamy overflow */
.section, .panel {
  overflow: hidden; /* cienie i zaokrąglenia wyglądają lepiej, nic nie wystaje */
}
/* ===== Money Flow Kids — Mobile & Drawer ===== */

/* Sticky topbar ponad treścią */
.mfk-topbar, .topbar, .navbar, header.app-header {
  position: sticky;
  top: 0;
  z-index: 200;
  background: rgba(7, 11, 22, .72);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255,255,255,.06);
}

/* Treść odsunięta od realnej wysokości topbaru (ustawianej w JS) */
:root { --header-h: 64px; }
main, .page, .content, #app {
  padding-top: calc(var(--header-h) + env(safe-area-inset-top, 0px));
  padding-left: clamp(12px, 4vw, 20px);
  padding-right: clamp(12px, 4vw, 20px);
  padding-bottom: calc(16px + env(safe-area-inset-bottom, 0px));
  box-sizing: border-box;
}

/* Zapobiegaj poziomemu scrollowi na tel. */
html, body { width: 100%; max-width: 100%; overflow-x: hidden; }

/* Drawer (boczne menu) */
.mfk-drawer{
  position: fixed; inset: 0 auto 0 0;
  width: 82%; max-width: 320px; height: 100dvh;
  transform: translateX(-100%);
  transition: transform .25s ease;
  background: rgba(10,14,27,.96);
  backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
  border-right: 1px solid rgba(255,255,255,.08);
  z-index: 300; display: flex; flex-direction: column;
}
.mfk-drawer.open{ transform: translateX(0); }

.mfk-drawer-nav{ display: grid; gap: 10px; padding: 16px; }
.mfk-drawer-nav .tab{
  display:block; text-align:left;
  padding: 12px 14px; border-radius: 12px;
  background: rgba(255,255,255,.05);
  border: 1px solid rgba(255,255,255,.08);
}

/* Backdrop */
.mfk-backdrop{
  position: fixed; inset: 0; z-index: 250;
  background: rgba(0,0,0,.4);
}

/* Desktop: chowamy drawer i hamburgera opcjonalnie */
@media (min-width: 992px){
  .mfk-drawer, .mfk-backdrop { display: none !important; }
}

/* KPI / tabele responsywnie (żeby nic nie było ucięte) */
.kpis, .summary-strip, .top-metrics {
  display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 8px;
}
@media (max-width: 720px){ .kpis, .summary-strip, .top-metrics { grid-template-columns: repeat(2, minmax(0,1fr)); } }
@media (max-width: 480px){ .kpis, .summary-strip, .top-metrics { grid-template-columns: 1fr; } }

.global-trends, .stocks-table, .fx-table, .tableWrap {
  overflow-x: auto; -webkit-overflow-scrolling: touch;
}

/* Jeżeli masz pseudo-elementy/overlaye w headerze, niech nie blokują kliknięć */
.mfk-topbar::before, .mfk-topbar::after { pointer-events: none; }
.mfk-topbar, .mfk-topbar * { pointer-events: auto; }
/* ===== Topbar responsive fix (desktop vs mobile) ===== */

/* Wspólny układ topbaru */
.mfk-topbar{
  display:flex; align-items:center; gap:10px;
  padding:8px 12px;
}
.mfk-topbar h1{ margin:0; white-space:nowrap; font-size: clamp(18px, 2vw, 22px); }

/* MOBILE (<= 991px): chowamy pełne menu, pokazujemy hamburgera */
@media (max-width: 991px){
  #mfkTopNav{ display:none !important; }   /* menu w topbarze przenosi się do drawer */
  .mfk-nav-toggle{ display:inline-flex !important; }
  .authwrap{ margin-left:auto; }
}

/* DESKTOP (>= 992px): chowamy hamburgera i drawer, pokazujemy pełne menu */
@media (min-width: 992px){
  .mfk-nav-toggle{ display:none !important; }            /* ← brak hamburgera na desktopie */
  #mfkTopNav{ display:flex !important; gap:8px; }        /* pełne menu widoczne */
  .mfk-drawer, .mfk-backdrop{ display:none !important; } /* drawer/offcanvas wyłączone */
}

/* Zapobieganie klik-blokadzie przez pseudo-elementy */
.mfk-topbar::before, .mfk-topbar::after{ pointer-events:none; }
.mfk-topbar, .mfk-topbar *{ pointer-events:auto; }
/* Mini jars sticky bar fix */
.mini-jars.sticky{
  position: sticky;
  top: calc(var(--header-h) + env(safe-area-inset-top, 0px));
  z-index: 150;
  display: flex;
  justify-content: space-around;
  padding: 6px 10px;
  background: rgba(7,11,22,0.72);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border-bottom: 1px solid rgba(255,255,255,.06);
}
.mini-jars .mini-jar-label{ font-size: 0.75rem; }
.mini-jars .mini-jar-value{ font-weight: 700; font-size: 0.9rem; }
/* Net Worth + Available Cash + Quick Actions responsive */
.grid.g-3{
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}
@media (max-width: 1024px){
  .grid.g-3{ grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 640px){
  .grid.g-3{ grid-template-columns: 1fr; }
}
/* Sticky mini jars – optymalizacja na telefonie */
#stickyMiniJars {
  display: flex;
  justify-content: space-between;
  gap: 6px;
  padding: 4px 6px;
  background: rgba(0,0,0,0.3); /* lekki kontrast, jak masz już to usuń */
}

#stickyMiniJars .mini-jar {
  flex: 1; /* wszystkie dzielą równą szerokość */
  min-width: 0; /* pozwala się ścisnąć */
  text-align: center;
  font-size: 0.75rem; /* zmniejszona czcionka */
  line-height: 1.2;
}

#stickyMiniJars .mini-jar-label {
  display: block;
  font-size: 0.7rem;
  color: var(--muted, #aaa);
}

#stickyMiniJars .mini-jar-value {
  font-size: 0.85rem;
  font-weight: 600;
}
/* === FINAL MINI-JARS FIX === */
#stickyMiniJars {
  display: flex !important;
  justify-content: space-around;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  flex-wrap: nowrap !important;   /* ⬅️ nie zawija */
}

#stickyMiniJars .mini-jar {
  flex: 1 1 auto;        /* wszystkie zajmują równą szerokość */
  min-width: 0;          /* pozwala się ścisnąć */
  text-align: center;
}

#stickyMiniJars .mini-jar-label {
  display: block;
  font-size: 0.65rem;    /* mniejsze etykiety */
  line-height: 1.1;
  color: var(--muted, #aaa);
}

#stickyMiniJars .mini-jar-value {
  font-size: 0.85rem;    /* mniejsze wartości */
  font-weight: 700;
  white-space: nowrap;   /* ⬅️ nie łamie się w 2 linie */
}
/* ==== MOBILE-ONLY PATCH (≤640px) ==== */
@media (max-width: 640px){

  /* 1) Ekran 1: Net Worth + Available Cash + Quick Actions w jednej kolumnie */
  .grid.g-3{
    grid-template-columns: 1fr !important;
  }
  .grid.g-3 > *{
    min-width: 0; /* zapobiega rozpychaniu kart */
  }

  /* 2) Parent: Clean the demo pod Settings (kolumna + pełna szerokość) */
  #tab-parent .row,
  #tab-parent .actions,
  #tab-parent .space{
    display: flex !important;
    flex-direction: column !important;
    align-items: stretch !important;
    gap: 8px !important;
  }
  #tab-parent .row > *,
  #tab-parent .actions > *,
  #tab-parent .space > *{
    width: 100% !important;   /* przyciski na pełną szerokość */
  }

  /* Jeżeli masz atrybuty data-action, ustaw kolejność jawnie: */
  #tab-parent [data-action="settings"]{ order: 1; }
  #tab-parent [data-action="clean-demo"]{ order: 2; }

  /* Fallback: gdy brak data-action – zwykle "Clean demo" ma klasę danger */
  #tab-parent .btn-danger{ order: 3; }
}
/* ==== MOBILE FIXES (≤640px) — bez psucia desktopu ==== */
@media (max-width: 640px){

  /* 1) Ekran 1: Net Worth → Available Cash → Quick Actions pionowo */
  .grid.g-3{
    grid-template-columns: 1fr !important;
  }
  .grid.g-3 > *{ min-width:0 !important; }
}

/* 2) NIE wymuszaj wyświetlania #tab-parent, gdy ma klasę .hidden */
#tab-parent.hidden{ display:none !important; }

/* 3) Parent układ w kolumnie TYLKO gdy zakładka jest widoczna */
#tab-parent:not(.hidden){
  display:grid;
  grid-template-columns:1fr;
  gap:12px;
}
#tab-parent:not(.hidden) .row,
#tab-parent:not(.hidden) .actions,
#tab-parent:not(.hidden) .space{
  display:flex;
  flex-direction:column;
  align-items:stretch;
  gap:10px;
}
#tab-parent:not(.hidden) .row > *,
#tab-parent:not(.hidden) .actions > *,
#tab-parent:not(.hidden) .space > *{
  width:100%;
  min-width:0;
}

/* 4) Czytelna kolejność w Parent (jeśli masz te identyfikatory/atrybuty) */
#tab-parent:not(.hidden) #parentSettings,        /* Settings */
#tab-parent:not(.hidden) [data-action="settings"]     { order:1; }
#tab-parent:not(.hidden) #parentHistory,
#tab-parent:not(.hidden) [data-section="history"]     { order:2; }
#tab-parent:not(.hidden) #parentAllowance,
#tab-parent:not(.hidden) [data-action="allowance"]    { order:3; }
#tab-parent:not(.hidden) #parentClearDemo,
#tab-parent:not(.hidden) [data-action="clean-demo"],
#tab-parent:not(.hidden) #cleanDemoBtn               { order:4; }

/* 5) Drawer (hamburger): upewnij się, że „Parent” jest widoczny na mobile */
@media (max-width: 991px){
  .mfk-drawer-nav [data-tab="parent"],
  .mfk-drawer-nav .tab-parent,
  .mfk-drawer-nav button[data-role="parent"]{
    display:block !important;
    visibility:visible !important;
  }
}

/* 6) Na wszelki wypadek: nic nie chowa elementów w Parent przez overflow */
#tab-parent .card{ overflow:visible !important; }
/* === Align Available Cash z innymi kartami === */
.available-cash{ margin:0 !important; }                  /* desktop+mobile */
@media (max-width:640px){
  .available-cash{ margin:0 !important; }                /* na wszelki wypadek */
}
/* === Drawer (hamburger): równe odstępy i brak przyklejenia "Login" do dołu === */
.mfk-drawer-nav{
  display:flex !important;
  flex-direction:column;
  gap:12px !important;            /* równa odległość między wszystkimi pozycjami */
}
.mfk-drawer-nav > *{
  margin:0 !important;            /* skasuj indywidualne marginesy pozycji */
  width:100%;
}
/* Pozycje menu (jeśli masz inne klasy/atrybuty, zostawiłem kilka wariantów) */
.mfk-drawer-nav .tab,
.mfk-drawer-nav button,
.mfk-drawer-nav a{
  display:block;
  padding:12px 14px;
}
/* "Login" nie ma prawa mieć auto-marginesu na górze */
.mfk-drawer-nav [data-tab="login"],
.mfk-drawer-nav .tab-login,
.mfk-drawer-nav button[data-action="login"]{
  margin-top:0 !important;
  align-self:stretch;
}
/* ==== Drawer: wyłącz separator między Tutorial a Login ==== */

/* 1) Jeśli to <hr> wewnątrz draweru */
.mfk-drawer hr,
.mfk-drawer-nav hr { display: none !important; }

/* 2) Jeśli separator jest borderem na elemencie Login */
.mfk-drawer-nav [data-tab="login"],
.mfk-drawer-nav .tab-login,
.mfk-drawer-nav a[href*="login"],
.mfk-drawer-nav button[data-action="login"]{
  border: 0 !important;
  border-top: 0 !important;
  box-shadow: none !important;        /* bywa, że „linia” to inset shadow */
  background-image: none !important;  /* bywa gradientem 1px */
}

/* 3) Jeśli separator jest na elemencie powyżej (Tutorial) */
.mfk-drawer-nav [data-tab="tutorial"],
.mfk-drawer-nav .tab-tutorial,
.mfk-drawer-nav a[href*="tutorial"],
.mfk-drawer-nav button[data-action="tutorial"]{
  border-bottom: 0 !important;
  box-shadow: none !important;
  background-image: none !important;
}

/* 4) Jeśli to pseudo-element kreski na dowolnej pozycji */
.mfk-drawer-nav > *::before,
.mfk-drawer-nav > *::after{
  content: none !important;
  display: none !important;
}

/* 5) Gdy separator jest na kontenerze listy */
.mfk-drawer,
.mfk-drawer-nav{
  border: 0 !important;
  border-top: 0 !important;
  border-bottom: 0 !important;
  box-shadow: none !important;
  background-image: none !important;
}
/* === MOBILE BUTTON COLOR LOCK (≤640px) === */
@media (max-width: 640px){
  :root{
    /* stałe, nieprzezroczyste kolory guzików */
    --btn-a:#3b82f6;   /* blue-500 */
    --btn-b:#22c55e;   /* green-500 */
    --btn-danger-a:#ef4444; /* red-500 */
    --btn-danger-b:#f97316; /* orange-500 */
  }

  /* wszystkie guziki i kapsułki */
  button,
  .btn,
  .role-switch .tab,
  .authwrap .tab{
    /* brak przezroczystości w tle = zero mieszania z kartą */
    background-image: linear-gradient(135deg, var(--btn-a), var(--btn-b)) !important;
    background-color: transparent !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    filter: none !important;             /* gdyby gdzieś był saturate() */
    box-shadow: 0 6px 18px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.15) !important;
    isolation: isolate;                   /* zabezpiecza przed blendowaniem */
  }

  /* warianty */
  .btn.primary{
    background-image: linear-gradient(135deg, var(--btn-a), #60a5fa) !important;
  }
  .btn.danger{
    background-image: linear-gradient(135deg, var(--btn-danger-a), var(--btn-danger-b)) !important;
    color:#0b1220 !important;
  }
}
/* === MF Kids — PATCH: Child drawer + Add buttons + Tutorial color + Parent layout === */

/* 0) Odblokuj slot „Add” (input + Add) również na profilu dziecka */
.jar-card .jar-actions{
  display:flex !important;
  flex-wrap:nowrap;
  align-items:center;
  justify-content:center;
  gap:8px;
}
.jar-card .jar-actions .jar-input{ width:100px; flex:0 0 auto; }
.jar-card .jar-actions .btn{ flex:0 0 auto; white-space:nowrap; }

 
/* 1) HAMBURGER – lista dla dziecka:
      Stocks, Currencies (FX), Profits, Tutorial, Login
      (uwzględnij obie nazwy: "stocks" i "invest") */
body[data-role="child"] .mfk-drawer-nav > *{ display:none !important; }

/* pokaż „Stocks” niezależnie od nazwy atrybutu/klasy/linku */
body[data-role="child"] .mfk-drawer-nav [data-tab="stocks"],
body[data-role="child"] .mfk-drawer-nav [data-tab="invest"],
body[data-role="child"] .mfk-drawer-nav .tab-stocks,
body[data-role="child"] .mfk-drawer-nav a[href*="stocks"],
body[data-role="child"] .mfk-drawer-nav a[href*="invest"]{
  display:block !important;
}

/* pokaż resztę dozwolonych pozycji */
body[data-role="child"] .mfk-drawer-nav [data-tab="fx"],
body[data-role="child"] .mfk-drawer-nav [data-tab="profits"],
body[data-role="child"] .mfk-drawer-nav [data-tab="tutorial"],
body[data-role="child"] .mfk-drawer-nav [data-tab="login"]{
  display:block !important;
}

/* 2) Tutorial – turkus po prawej (#2ef6b6) */
 #tutorialBtn:hover,
.mfk-drawer-nav [data-tab="tutorial"]:hover{ filter:brightness(1.05); }
#tutorialBtn:active,
.mfk-drawer-nav [data-tab="tutorial"]:active{ filter:brightness(0.95); }

/* 3) Parent – historia POD spodem (na mobile) */
@media (max-width: 900px){
  #tab-parent:not(.hidden){
    display:grid !important;
    grid-template-columns:1fr !important;
    gap:12px !important;
  }
  #tab-parent .card,
  #tab-parent .row,
  #tab-parent .space,
  #tab-parent .actions{
    display:flex !important;
    flex-direction:column !important;
    align-items:stretch !important;
    gap:8px !important;
    width:100% !important;
    min-width:0 !important;
  }
  #tab-parent [data-section="history"],
  #parentHistory{
    order:99 !important;
    width:100% !important;
  }
}
/* === MOBILE: wyłącz twardy gradient/cienie i ujednolić wygląd tabów === */
@media (max-width: 640px){
  button,
  .btn,
  .role-switch .tab,
  .authwrap .tab {
    background-color: #f0f9ff !important;   /* pastelowy błękit */
    border: 1px solid #bae6fd !important;
    color: #0369a1 !important;              /* morski tekst */
  }
  .btn.primary { background-color:#d9f99d !important; color:#365314 !important; }
  .btn.danger  { background-color:#fecaca !important; color:#7f1d1d !important; }

  /* 2) Drawer – takie same kapsułki jak w topbarze */
  #mfkMobileDrawer .tab,
  .mfk-drawer-nav .tab{
    background-image: none !important;
    background-color: #111827 !important;
    border: 1px solid #00ede9 !important;
    color: var(--ink) !important;
    box-shadow: none !important;
    border-radius: 12px !important;
    padding: 10px 14px !important;
  }

  /* 3) Stan aktywny/hover – subtelny, bez „ciężkiego” połysku */
  .role-switch .tab.active,
  #mfkMobileDrawer .tab.active{
    background-color:#1f2937 !important;
    border-color:#3b82f6 !important;
    color:#fff !important;
  }
  .role-switch .tab:hover,
  #mfkMobileDrawer .tab:hover{
    background-color:#162033 !important;
    border-color:#3a4f77 !important;
    transform:none !important;
  }
 }
/* === MOBILE-ONLY BUTTON FIX (bez zieleni, nie rusza desktopu) === */
@media (max-width: 640px){
  /* wszystkie guziki i kapsułki */
  :is(button, .btn, .role-switch .tab, .authwrap .tab){
    background: none !important;                /* zabija gradient z bazowej reguły */
    background-color: #e6f2ff !important;       /* jasny błękit */
    color: #0b3b66 !important;                   /* ciemny morski tekst */
    border: 1px solid #b7dbff !important;
    box-shadow: 0 4px 10px rgba(0,0,0,.25) !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    filter: none !important;
  }

  /* warianty, też bez zieleni */
  .btn.primary{
    background: none !important;
    background-color: #e6f2ff !important;       /* ten sam jasny błękit */
    color: #0b3b66 !important;
  }
  .btn.danger{
    background: none !important;
    background-color: #ffe5e5 !important;       /* jasny czerwony */
    color: #7f1d1d !important;
    border-color: #ffc9c9 !important;
  }
}
/* --- FX: kompakt między Pair a Amount + bez paska przewijania --- */
#tab-fx .tableWrap{
  overflow-x: hidden !important;     /* bez poziomego scrolla */
  padding-right: 0 !important;       /* nic nie „pcha” w prawo */
}

#tab-fx table{
  table-layout: fixed !important;
  width: 100% !important;
}

#tab-fx th, #tab-fx td{
  padding: 8px 10px;                 /* bazowe, równe */
  white-space: nowrap !important;
  text-align: center;
  vertical-align: middle;
}

/* 1) Zmniejsz dystans MIĘDZY 1. i 2. kolumną */
#tab-fx th:nth-child(1), #tab-fx td:nth-child(1){ padding-right: 6px !important; }
#tab-fx th:nth-child(2), #tab-fx td:nth-child(2){ padding-left: 6px !important; }

/* 2) Ostatnia kolumna: tyle, by zmieścić input + przycisk, bez wciskania scrolla */
#tab-fx th:last-child, #tab-fx td:last-child{
  min-width: 136px !important;       /* było 148–160, to często wywoływało scroll */
  width: 136px !important;
  padding-right: 8px !important;
  box-sizing: border-box;
}

/* 3) Akcje w jednej linii i BEZ marginesu w lewo (to robiło „przerwę”) */
#tab-fx td.space{
  display: flex !important;
  align-items: center !important;
  gap: 8px !important;
  justify-content: flex-start !important;
  margin-left: 0 !important;         /* usuwa sztuczną szczelinę */
  white-space: nowrap !important;
}

/* 4) Węższy numeryczny input w akcjach — żeby wszystko siadło elegancko */
#tab-fx td.space input[type="number"],
#tab-fx td.space .input{
  width: 72px !important;
  min-width: 72px !important;
}
/* ===== Basket (Stocks & FX) ===== */
/* Panel + nagłówek */
#stock-basket, #fx-basket{
  background: color-mix(in srgb, var(--card) 90%, transparent);
  border: 1px solid var(--border-c);
  border-radius: var(--r-lg);
  box-shadow: var(--shadow-2);
  padding: 12px;
}
#stock-basket .panel-header, #fx-basket .panel-header{
  display:flex; align-items:center; justify-content:space-between; gap:8px;
  margin-bottom: 8px;
}
#stock-basket .panel-header h3, #fx-basket .panel-header h3{
  margin:0; font-weight:800; letter-spacing:.2px;
}

/* Lista pozycji */
#stock-basket .basket-list,
#fx-basket   .basket-list{
  display:grid; gap:8px;
}

/* Empty state */
#stock-basket .basket-empty,
#fx-basket   .basket-empty{
  padding:12px;
  border:1px dashed var(--border-c);
  border-radius: var(--r-md);
  color: var(--muted);
  text-align:center;
}

/* Wiersz pozycji */
#stock-basket .basket-item,
#fx-basket   .basket-item{
  display:grid;
  grid-template-columns: 1.1fr .9fr .7fr .7fr .8fr auto; /* Ticker/Name | Price | Δ% | Qty | Subtotal | × */
  align-items:center;
  gap:10px;
  padding:10px 12px;
  background:#0c1528;
  border:1px solid var(--panel-b);
  border-radius:12px;
}

/* Komórki */
.b-item-asset{ display:flex; align-items:center; gap:10px; min-width:0; }
.b-ticker{
  font-weight:800; letter-spacing:.2px; background:#0f172a; border:1px solid var(--border-c);
  padding:4px 8px; border-radius:8px; white-space:nowrap;
}
.b-name{
  color:var(--muted); overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
}

/* Cena + strzałki (używa Twoich .arrow-*) */
.b-price{ font-variant-numeric: tabular-nums; font-weight:700; }
.b-change{
  display:inline-flex; align-items:center; gap:6px;
  font-variant-numeric: tabular-nums;
  font-weight:700;
}
.b-change .arrow-up{ color:var(--ok); }
.b-change .arrow-down{ color:var(--warn); }
.b-change .arrow-flat{ color:var(--muted); }

/* Ilość */
.b-qty{
  display:flex; align-items:center; gap:6px; justify-content:flex-start;
}
.b-qty .input{
  width:80px !important; min-width:80px !important; text-align:center;
  font-variant-numeric: tabular-nums;
}
.b-qty .btn{ padding:8px 10px; }

/* Suma pozycji */
.b-subtotal{
  font-weight:800; font-variant-numeric: tabular-nums;
}

/* Usuń pozycję */
.b-remove{
  display:inline-grid; place-items:center;
}
.b-remove .btn{
  padding:8px 10px;
  background: rgba(239, 68, 68, .12);
  border: 1px solid rgba(239, 68, 68, .35);
  color: #fecaca;
}
.b-remove .btn:hover{ filter:brightness(1.08); }

/* Podsumowanie */
#stock-basket .basket-summary,
#fx-basket   .basket-summary{
  margin-top: 10px; padding: 12px;
  border:1px solid var(--border-c);
  border-radius:12px;
  background: color-mix(in srgb, var(--bg-2) 92%, transparent);
  display:grid; gap:8px;
}
.basket-summary .row{
  display:flex; align-items:center; justify-content:space-between; gap:8px;
}
.basket-summary .val{
  font-weight:900; font-variant-numeric: tabular-nums;
}

/* Akcje */
#stock-basket .basket-actions,
#fx-basket   .basket-actions{
  margin-top: 10px; display:flex; gap:8px; justify-content:flex-end; flex-wrap:wrap;
}
#stock-basket [data-basket-buy],
#fx-basket   [data-basket-buy]{
  min-width: 200px;
}

/* Drobne – monospacers dla liczb (opcjonalnie) */
.b-price, .b-change, .b-subtotal, .basket-summary .val{
  font-variant-numeric: tabular-nums;
}

/* Hover/aktywne */
#stock-basket .basket-item:hover,
#fx-basket   .basket-item:hover{
  transform: translateY(-1px);
  border-color:#3a4f77;
  transition: transform .15s ease, border-color .2s ease;
}

/* Responsywność */
@media (max-width: 900px){
  #stock-basket .basket-item, #fx-basket .basket-item{
    grid-template-columns: 1fr .8fr .6fr auto; /* Asset | Price | Qty | Subtotal */
    grid-template-areas:
      "asset price qty subtotal"
      "asset change qty subtotal";
    row-gap:6px;
  }
  .b-item-asset{ grid-area: asset; }
  .b-price{ grid-area: price; }
  .b-change{ grid-area: change; font-size: 12px; opacity:.9; }
  .b-qty{ grid-area: qty; justify-content:flex-end; }
  .b-subtotal{ grid-area: subtotal; text-align:right; }
  .b-remove{ display:none; } /* schowaj X na mobilkach; ewentualnie daj long-press w JS */
}

/* Ultra-compact (bardzo wąsko) */
@media (max-width: 520px){
  #stock-basket .basket-item, #fx-basket .basket-item{ gap:6px; padding:8px 10px; }
  .b-ticker{ padding:3px 6px; }
  .b-qty .input{ width:70px !important; min-width:70px !important; }
  #stock-basket [data-basket-buy], #fx-basket [data-basket-buy]{ width:100%; }
}
/* Basket: Total Quantity obok Total Amount */
.basket .totals{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin:10px 0 6px;
}
.basket .totals > div{ flex:1 1 auto; min-width:0; }

/* Na wąskich ekranach — jeden pod drugim */
@media (max-width: 560px){
  .basket .totals{
    flex-direction:column;
    align-items:flex-start;
    gap:6px;
  }
}
/* --- Ustawienie koszyków pod prawą kolumną (Portfolio) --- */

/* Na wąskich ekranach koszyk na pełną szerokość pod całością */
@media (max-width: 900px){
  #tab-invest #stock-basket,
  #tab-fx     #fx-basket{
    grid-column: 1 / -1;
  }
}

/* --- Podsumowanie w jednej linii --- */
.basket-summary .summary-row{
  display:flex;
  gap:16px;
  justify-content:space-between;      /* lewa/prawa krawędź */
  align-items:baseline;
  padding:8px 0;
}

.basket-summary .summary-item{
  display:flex;
  gap:8px;
  align-items:baseline;
  white-space:nowrap;
}

.basket-summary .summary-item .val{
  font-weight:800;
}

/* NIE zwężaj sztucznie kolumn w stock portfolio */
#tab-invest table{ table-layout: auto !important; }


/* jeśli chcesz, aby prawa kolumna (portfolio) była trochę szersza niż lewa (lista),
   to odkomentuj poniżej:
#tab-invest,
#tab-fx{
  grid-template-columns: 1.1fr 1.4fr !important;
}
*/

/* w ostatniej kolumnie akcji trzymaj input + przyciski w jednej linii */
#tab-invest td.space,
#tab-fx td.space{
  display: flex !important;
  align-items: center !important;
  gap: 8px !important;
  white-space: nowrap !important;
}

/* przywróć widoczność slotu Add (input + Add) również dla dziecka */
body[data-role="child"] .jar-card .jar-actions{
  display: flex !important;
}

/* (opcjonalnie) delikatnie poszerz pole qty w portfolio */
#tab-invest .input,
#tab-fx .input{
  min-width: 80px !important;
  width: 80px !important;
}
/* === Basket: pełna szerokość prawej kolumny (Stocks + FX) === */
section#tab-invest:not(.hidden),
section#tab-fx:not(.hidden){
  justify-items: stretch !important;   /* grid items rozciągają się */
}

#tab-invest #stock-basket,
#tab-fx     #fx-basket{
  grid-column: 2 !important;           /* prawa kolumna */
  width: 100% !important;              /* ⬅️ zamiast auto */
  max-width: none !important;
  justify-self: stretch !important;    /* rozciągnij w kolumnie */
}

/* gdyby kolumna prawa miała gdzieś max-width – wyłącz */
#tab-invest .col.right,
#tab-fx     .col.right{
  width: 100% !important;
  max-width: none !important;
}
/* === STOCK PORTFOLIO — bez paska, ciaśniejsze kolumny === */

/* nie pozwól, by globalne 480px wymuszało scroll */
#tab-invest .tableWrap table{ min-width: 0 !important; }

/* tabela ma się mieścić w 100% kolumny i używać stałego layoutu */
#tab-invest .tableWrap{ overflow-x: hidden !important; }
#tab-invest table{
  width: 100% !important;
  table-layout: fixed !important;   /* zamiast auto */
}

/* ciaśniejsze komórki */
#tab-invest th, #tab-invest td{ padding: 6px 8px !important; }

/* proporcje kolumn – tak, by się mieściło bez scrolla */
#tab-invest th:nth-child(1), #tab-invest td:nth-child(1){ width: 12%; } /* Ticker   */
#tab-invest th:nth-child(2), #tab-invest td:nth-child(2){ width:  8%; } /* Shares   */
#tab-invest th:nth-child(3), #tab-invest td:nth-child(3){ width: 15%; } /* Avg cost */
#tab-invest th:nth-child(4), #tab-invest td:nth-child(4){ width: 15%; } /* Price    */
#tab-invest th:nth-child(5), #tab-invest td:nth-child(5){ width: 14%; } /* Value    */
#tab-invest th:nth-child(6), #tab-invest td:nth-child(6){ width: 12%; } /* P/L      */
#tab-invest th:nth-child(7), #tab-invest td:nth-child(7){ width: 24%; } /* Qty + Sell */

/* akcje w ostatniej kolumnie możliwie kompaktowo */
#tab-invest td.space{ gap: 6px !important; }
#tab-invest td.space input[type="number"],
#tab-invest td.space .input{ width: 72px !important; min-width: 72px !important; }
#tab-invest td.space .btn{ padding: 8px 10px !important; }
/* === FX Portfolio: Value i P/L nie nachodzą na siebie (FINAL OVERRIDE) === */
section#tab-fx .tableWrap table{
  table-layout: fixed !important;   /* stabilne szerokości kolumn */
  width: 100% !important;
}

section#tab-fx th, 
section#tab-fx td{
  white-space: nowrap !important;
  text-align: right;                /* liczby do prawej */
  padding: 8px 12px !important;
}

/* Ustal szerokości kolumn (dopasowane do Twojego układu) */
section#tab-fx th:nth-child(1), section#tab-fx td:nth-child(1){ width: 18%;  text-align:left; } /* Pair */
section#tab-fx th:nth-child(2), section#tab-fx td:nth-child(2){ width: 14%; }                   /* Amount */
section#tab-fx th:nth-child(3), section#tab-fx td:nth-child(3){ width: 16%; }                   /* Avg. rate */
section#tab-fx th:nth-child(4), section#tab-fx td:nth-child(4){ width: 16%; }                   /* Rate */
section#tab-fx th:nth-child(5), section#tab-fx td:nth-child(5){ width: 20%; }                   /* Value */
section#tab-fx th:nth-child(6), section#tab-fx td:nth-child(6){ width: 16%; }                   /* P/L  */
section#tab-fx th:nth-child(7), section#tab-fx td:nth-child(7){ width: auto; text-align:center;}/* Actions */

/* Dodatkowy bufor między Value i P/L (gdy treści są długie) */
section#tab-fx td:nth-child(5){ padding-right: 16px !important; }   /* Value → więcej miejsca po prawej */
section#tab-fx td:nth-child(6){ padding-left: 16px !important; }    /* P/L   → odsuń od Value */
/* === Mini strip – base === */
.mini-strip{
  position: sticky;
  top: 60px;               /* dopasuj do wysokości topbara */
  z-index: 50;
  background: transparent;
  padding: 4px 10px 8px;
  backdrop-filter: blur(6px);
}

.mini-strip .mini-row{
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  align-items: center;
  white-space: nowrap;
}

.mini-strip .mini-pill{
  font-size: 12px;
  color: var(--muted);
  border: 1px solid var(--border-c);
  border-radius: 999px;
  padding: 2px 10px;
  background: rgba(17,24,39,.45);
}
.mini-strip .mini-pill b{
  margin-left: 6px;
  color: var(--ink);
  font-weight: 700;
}

.mini-strip .mini-pill.good b{ color: var(--ok); }
.mini-strip .mini-pill.bad  b{ color: var(--warn); }

/* === Desktop: jeden rząd, auto-scroll poziomy jeśli brak miejsca === */
@media (min-width: 641px){
  .mini-strip{
    padding-bottom: 6px;
  }
  .mini-strip .row-1,
  .mini-strip .row-2{
    flex-wrap: nowrap;
  }
  .mini-strip .row-2{ margin-top: 6px; }
}

/* === Mobile: dwa rzędy, pełna szerokość, brak ściskania === */
@media (max-width: 640px){
  .mini-strip{
    padding-top: 2px;
  }
  .mini-strip .row-1,
  .mini-strip .row-2{
    justify-content: space-between;
  }
  .mini-strip .mini-pill{
    flex: 1 1 auto;        /* pigułki rozszerzają się równomiernie */
    min-width: calc(50% - 8px);
    text-overflow: ellipsis;
    overflow: hidden;
  }
  .mini-strip .row-2{
    margin-top: 6px;       /* drugi rząd zaraz pod pierwszym */
  }
}
/* === Mini strip – base === */
.mini-strip{
  position: sticky;
  top: 60px;               /* dopasuj do wysokości topbara */
  z-index: 50;
  background: transparent;
  padding: 4px 10px 8px;
  backdrop-filter: blur(6px);
}

.mini-strip .mini-row{
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  align-items: center;
  white-space: nowrap;
}

.mini-strip .mini-pill{
  font-size: 12px;
  color: var(--muted);
  border: 1px solid var(--border-c);
  border-radius: 999px;
  padding: 2px 10px;
  background: rgba(17,24,39,.45);
}
.mini-strip .mini-pill b{
  margin-left: 6px;
  color: var(--ink);
  font-weight: 700;
}

.mini-strip .mini-pill.good b{ color: var(--ok); }
.mini-strip .mini-pill.bad  b{ color: var(--warn); }

/* === Desktop: jeden rząd, auto-scroll poziomy jeśli brak miejsca === */
@media (min-width: 641px){
  .mini-strip{
    padding-bottom: 6px;
  }
  .mini-strip .row-1,
  .mini-strip .row-2{
    flex-wrap: nowrap;
  }
  .mini-strip .row-2{ margin-top: 6px; }
}

/* === Mobile: dwa rzędy, pełna szerokość, brak ściskania === */
@media (max-width: 640px){
  .mini-strip{
    padding-top: 2px;
  }
  .mini-strip .row-1,
  .mini-strip .row-2{
    justify-content: space-between;
  }
  .mini-strip .mini-pill{
    flex: 1 1 auto;        /* pigułki rozszerzają się równomiernie */
    min-width: calc(50% - 8px);
    text-overflow: ellipsis;
    overflow: hidden;
  }
  .mini-strip .row-2{
    margin-top: 6px;       /* drugi rząd zaraz pod pierwszym */
  }
}
/* ✅ Powiększone labelki bez pogrubienia */
#stickyMiniJars .mini-jar .mini-jar-label {
  font-size: 14px !important;   /* większy rozmiar */
  font-weight: 400 !important;  /* normalna grubość */
  letter-spacing: 0.3px;
  color: var(--ink) !important;
}

#portfolioBody td.space .btn,
#fxBody td.space .btn {
  margin-left: 2px;      /* odsuń guziki od P/L */
}
/* === FX Portfolio: przyciski maksymalnie po prawej === */
section#tab-fx #fxBody td.space{
  display: flex !important;
  align-items: center !important;
  justify-content: flex-end !important; /* ⬅️ dociśnij do prawej */
  gap: 6px !important;
  padding-right: 12px !important;       /* trochę „oddechu” od krawędzi */
}

/* daj ostatniej kolumnie więcej miejsca na input + guziki */
section#tab-fx thead tr > th:last-child,
section#tab-fx #fxBody tr > td:last-child{
  width: 180px !important;              /* możesz podbić do 190–200 jeśli trzeba */
}

/* na wszelki wypadek: elementy w akcji nie rozciągają się */
section#tab-fx #fxBody td.space > *{
  flex: 0 0 auto !important;
}

/* Stock – bez zmian (przypominajka, żeby nic go nie nadpisało) */
section#tab-invest #portfolioBody td.space{
  justify-content: flex-start !important;
}
/* === Stock Portfolio: wyrównanie Enter + Sell w kolumnie === */
#tab-invest td.space {
  display: flex !important;
  flex-direction: column !important;  /* enter nad Sell */
  align-items: flex-end !important;   /* ⬅️ całość do prawej */
  gap: 6px;
  white-space: nowrap;
  padding-left: 12px !important;      /* dodatkowy dystans od P/L */
}

/* węższy input, żeby się nie ściskało */
#tab-invest td.space input[type="number"],
#tab-invest td.space .input {
  width: 72px !important;
  min-width: 72px !important;
  text-align: center;
}
/* === Stock Portfolio: delikatne odsunięcie P/L od przycisków === */
#tab-invest table {
  table-layout: fixed !important; /* wymuś sztywne proporcje */
  width: 100% !important;
}

#tab-invest th:nth-child(6),
#tab-invest td:nth-child(6) {
  padding-right: 20px !important;   /* ⬅️ dodatkowy bufor */
  width: 18% !important;            /* lekko poszerz P/L */
  box-sizing: border-box;
  text-align: right;                 /* liczby do prawej */
}

#tab-invest th:nth-child(7),
#tab-invest td:nth-child(7) {
  width: auto !important;           /* guziki zostają jak były */
}
/* === Stock Portfolio: odsunięcie wartości P/L od guzików === */
#tab-invest td:nth-child(6) span {
  display: inline-block;
  margin-right: 0px;   /* ⬅️ dostosuj (np. 16–24px) żeby było idealnie */
}
/* STOCK PORTFOLIO: dosuń wartości P/L delikatnie w prawo (bez ruszania guzików) */
section#tab-invest .tableWrap table tr > td:nth-child(6),
section#tab-invest .tableWrap table tr > th:nth-child(6){
  text-align: right !important;         /* liczby do prawej krawędzi kolumny */
  padding-left: 21px !important;        /* odstęp od kolumny Value */
}

/* jeśli chcesz odsunąć też Value, zostaw to (opcjonalne) */
section#tab-invest .tableWrap table tr > td:nth-child(5){
  padding-right: 14px !important;       /* bufor między Value a P/L */
}
/* === MINI-JARS: desktop bez zmian; mobile = 2 rzędy po 5 na tym samym sticky barze === */

/* Bazowo (desktop): jeden rząd, bez zawijania */
#stickyMiniJars{
  position: sticky;
  top: var(--header-h, 64px);
  z-index: 200;
  padding: 8px 12px;
  background: rgba(7,11,22,.72);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255,255,255,.06);

  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: nowrap;
}

/* Tylko telefon (≤640px): zmień na grid 5 kolumn → automatycznie zrobi się 2 rzędy (5+5) */
@media (max-width: 640px){
  #stickyMiniJars{
    display: grid !important;                 /* nadpisuje ewentualne flexy */
    grid-template-columns: repeat(5, 1fr);    /* 5 w pierwszym rzędzie, reszta spadnie pod spód */
    column-gap: 8px;
    row-gap: 4px;
    padding: 6px 8px;
  }
  #stickyMiniJars .mini-jar{
    min-width: 0;
    text-align: center;
  }
  #stickyMiniJars .mini-jar-label{
    font-size: 11px;
    line-height: 1.05;
    white-space: nowrap;       /* bez łamania */
    overflow: hidden;
    text-overflow: ellipsis;   /* utnie z „…” gdy za wąsko */
  }
  #stickyMiniJars .mini-jar-value{
    font-size: 13px;
    font-weight: 800;
    white-space: nowrap;
  }
}
#rotateOverlay{
  position:fixed; inset:0; z-index:9999;
  display:none; align-items:center; justify-content:center;
  background:rgba(0,0,0,.75); color:#fff; text-align:center; padding:24px;
}
#rotateOverlay .box{
  background:#111827; border:1px solid rgba(255,255,255,.12);
  border-radius:12px; padding:16px 20px; max-width:480px;
}
/* ==== YouTube mini-player (dock + modal + mobile) ==== */
.ytmini.hidden{ display:none !important; }

.ytmini{
  position: fixed;
  right: 12px;
  bottom: 12px;
  width: 360px;
  aspect-ratio: 16 / 9;
  background: #0b1220;
  border: 1px solid rgba(255,255,255,.12);
  border-radius: 12px;
  box-shadow: 0 18px 40px rgba(2,8,23,.45);
  z-index: 400; /* ponad topbarem/mini-jars */
  display: grid;
  grid-template-rows: auto 1fr;
  overflow: hidden;
}

.ytmini-bar{
  display:flex; align-items:center; gap:8px;
  padding: 6px 8px;
  background: rgba(15,23,42,.85);
  border-bottom: 1px solid rgba(255,255,255,.08);
  user-select:none; cursor: move;   /* drag (desktop) */
}
.ytmini-bar .spacer{ flex:1 1 auto; }
.ytmini-btn{
  padding: 4px 8px; border:1px solid rgba(255,255,255,.16);
  background:#111827; color:#e5e7eb; border-radius:8px; cursor:pointer;
}
.ytmini-btn:hover{ filter:brightness(1.1); }
.ytmini-btn.danger{ background:#221417; border-color:#3a1b21; color:#fecaca; }

.ytmini-body{ position:relative; }
.ytmini iframe{
  position:absolute; inset:0; width:100%; height:100%; border:0;
  background:#000;
}

/* Powiększone (modal) – na środku ekranu */
.ytmini.is-large{
  width: min(920px, 92vw);
  height: min(520px, 52vw);  /* utrzymuje ~16:9 na węższych */
  aspect-ratio: auto;
  left: 50%; top: 50%; right:auto; bottom:auto;
  transform: translate(-50%, -50%);
  cursor: default;
}

/* Zminimalizowane – cienki pasek (zatrzymuje wideo) */
.ytmini.is-mini{
  width: 260px; height: 48px; aspect-ratio: auto;
}

/* Rączka zmiany rozmiaru (prawy/dolny róg) */
.ytmini-resize{
  position:absolute; right:4px; bottom:4px; width:14px; height:14px;
  border-right: 2px solid rgba(255,255,255,.35);
  border-bottom: 2px solid rgba(255,255,255,.35);
  border-radius:2px; cursor: nwse-resize;
  opacity:.7;
}

/* Mobile: pełna szerokość u dołu, bez przeciągania i bez rączki */
@media (max-width: 640px){
  .ytmini{
    left: 0; right: 0; bottom: 0;
    width: 100vw; height: auto; aspect-ratio: 16/9;
    border-radius: 12px 12px 0 0;
  }
  .ytmini.is-large{
    width: 100vw !important; height: auto !important; aspect-ratio: 16/9 !important;
    left: 0; right: 0; top: auto; bottom: 0; transform:none;
    border-radius: 12px 12px 0 0;
  }
  .ytmini-bar{ cursor: default; }
  .ytmini-resize{ display:none; }
}
/* === YouTube mini-player === */
.yt-mini {
  position: fixed;
  right: 16px;
  bottom: 16px;
  width: 340px;           /* startowa szerokość */
  aspect-ratio: 16 / 9;
  background: #000;
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,.45);
  overflow: hidden;
  z-index: 9999;
}

/* rozmiar „medium” – OSOBNY blok */
.yt-mini.medium {
  width: 370px;           /* szerokość */
  height: 208px;          /* wysokość (16:9) */
}

.yt-mini.hidden { display: none; }

.yt-mini.max {                 /* powiększony */
  width: min(920px, 92vw);
  right: 16px;
  bottom: 16px;
}

.yt-mini iframe {
  width: 100%;
  height: 100%;
  border: 0;
  display: block;
}

.yt-controls {
  position: absolute;
  top: 6px;
  left: 6px;
  display: flex;
  gap: 6px;
  z-index: 2;
}

.yt-btn {
  height: 28px;
  min-width: 28px;
  padding: 0 8px;
  border-radius: 8px;
  background: rgba(0,0,0,.55);
  color: #fff;
  border: 1px solid rgba(255,255,255,.2);
  cursor: pointer;
}
.yt-btn.danger { background: rgba(180,0,0,.6); }
.yt-btn:hover { filter: brightness(1.1); }

/* Mini-player – rozmiary */
.yt-mini      { position: fixed; top: 12px; right: 12px; width: 320px; height: 180px; z-index: 9999; }
.yt-mini.large{ width: 560px; height: 315px; }
/* enforce bottom-right docking */
.yt-mini{
  position: fixed;
  right: 16px;
  bottom: 16px;
  top: auto !important;   /* zabij ewentualne top: 12px */
}
/* --- UNLOCK SCROLL + ZABIJ ORIENTATION OVERLAY --- */
#rotateOverlay{ display:none !important; pointer-events:none !important; }

html, body{
  height:auto !important;
  min-height:100% !important;
  overflow-y:auto !important;
  overflow-x:hidden;                /* poziomy dalej blokujemy */
  -webkit-overflow-scrolling:touch; /* płynne na iOS */
  touch-action: pan-y;              /* wymuś pionowy scroll */
}
/* === Savings kolor na #99FFFF === */
.jar-savings{
  --jar-liquid:#99ffff !important;
  --jar-lid:#27ae60; /* zostaw albo zmień jeśli chcesz */
}

.jar2.savings{
  --liq-top:#99ffff !important;
  --liq-bottom:#99ffff !important;
}
/* === SAVINGS → ICE BLUE (twardy override) === */
.jar2.savings .liquid::before,
.jar2.jar-savings .liquid::before {           /* jeśli w HTML masz 'jar-savings' */
  background: linear-gradient(180deg, #99ffff, #99ffff) !important;
}
.jar2.savings,
.jar2.jar-savings {
  --liq-top:#99ffff !important;
  --liq-bottom:#99ffff !important;
}
.jar2.savings,
.jar2.jar-savings{
  --liq-top:#99ffff; --liq-bottom:#99ffff;
}
/* Savings = ICE BLUE */
.wow-jars .jar-card:nth-child(1) .jar-svg{
  --liq-top:#15f4ee !important;
  --liq-bottom:##15f4ee !important;
   --glow:#99ffff !important;
  } 
   /* Net Worth = zielony */
#netWorth {
  color: #22c55e !important;   /* zielony jak Savings */
  font-weight: 800;
}

/* Available Cash = żółty */
#availableCash {
  color: #dee792 !important;   /* 500/600 żółty (Tailwind amber) */
  font-weight: 800;
}
/* Available Cash (mini-jar) = żółty */
#miniCash {
  color: #dee792 !important;   /* złoty/żółty */
  font-weight: 800;
}
#appTitle,
#t-appTitle,
.brand-title{
  background-image: linear-gradient(90deg, var(--brand-blue), var(--brand-green));
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent !important;
  color: transparent !important;
  display: inline-block;
  font-weight: 800;
}
/* == MOBILE MODE (≤640px) – iPKO vibe == */
@media (max-width: 640px){

  /* 0) Bez poziomego scrolla i bez auto-zooma na inputach */
  html,body{max-width:100%; overflow-x:hidden;}
  body{-webkit-text-size-adjust:100%;}

  /* 1) Topbar — prosty, sticky */
  :root{ --header-h:56px; }
  .mfk-topbar, .topbar{
    position: sticky !important;
    top: 0;
    z-index: 200;
    height: var(--header-h);
    background: rgba(7,11,22,.72) !important;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(255,255,255,.06);
  }
  /* hamburger widoczny, środkowe menu do szuflady */
  #mfkTopNav{ display:none !important; }
  .mfk-nav-toggle{ display:inline-flex !important; }

  /* 2) Pasek mini-KPI — 2 kolumny (czytelnie) */
  #stickyMiniJars{
    position: sticky !important;
    top: var(--header-h);
    z-index: 150;
    display: grid !important;
    grid-template-columns: repeat(2, minmax(0,1fr));
    gap: 6px 8px;
    padding: 6px 8px;
    background: rgba(7,11,22,.72) !important;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border-bottom: 1px solid rgba(255,255,255,.06);
  }
  #stickyMiniJars .mini-jar-label{ font-size:.7rem; }
  #stickyMiniJars .mini-jar-value{ font-size:.9rem; font-weight:800; white-space:nowrap; }

  /* 3) Siatki → jedna kolumna */
  .grid.g-3,
  #tab-invest:not(.hidden),
  #tab-fx:not(.hidden),
  #tab-profits:not(.hidden),
  #tab-parent:not(.hidden){
    grid-template-columns: 1fr !important;
  }

  /* 4) Listy rynku i koszyki na całą szerokość */
  #stock-basket, #fx-basket{
    grid-column: 1 / -1 !important;
    width: 100% !important;
  }

  /* 5) Portfolio: zamieniamy tabele na „karty” (zero ścisku i nakładek) */
  #tab-invest .tableWrap, #tab-fx .tableWrap{
    overflow-x: visible !important;
  }
  #tab-invest thead, #tab-fx thead{ display:none !important; }

  #tab-invest tbody tr,
  #tab-fx    tbody tr{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap:6px;
    padding:10px;
    margin:0 0 8px;
    background:#0c1528;
    border:1px solid var(--panel-b, #334155);
    border-radius:12px;
  }
  #tab-invest td, #tab-fx td{
    border-top:0 !important;
    padding:2px 6px !important;
    text-align:left !important;
    white-space:normal !important;
  }

  /* etykiety z nagłówków jako „label” nad wartością */
  #tab-invest td::before, #tab-fx td::before{
    content: attr(data-label);
    display:block;
    font-size:12px;
    color:var(--muted);
    margin-bottom:2px;
  }

  /* kolumna z akcjami na pełną szerokość, pod spodem */
  #tab-invest td.space, #tab-fx td.space{
    grid-column: 1 / -1;
    display:flex !important;
    justify-content:flex-end !important;
    align-items:center !important;
    gap:8px !important;
  }

  /* 6) Tap-targety i inputy (iOS nie powiększa) */
  button, .btn{ min-height:44px; }
  input, select{ font-size:16px !important; } /* blokuje auto-zoom na iOS */

  /* 7) Lżejsze przyciski jak w bankowych apkach */
  :is(button,.btn,.role-switch .tab,.authwrap .tab){
    background: #1f2937 !important;
    border:1px solid #334155 !important;
    color:#e5e7eb !important;
    box-shadow:none !important;
    backdrop-filter:none !important;
  }

  /* 8) Tytuł z gradientem — zostaje */
  #t-appTitle, .brand-title{
    background-image: linear-gradient(90deg,#3b82f6,#22c55e) !important;
    -webkit-background-clip:text; background-clip:text;
    -webkit-text-fill-color:transparent !important; color:transparent !important;
  }
}
/* === JARS: input bez spinnerów + kompakt === */
.jar-card .jar-input{
  appearance: textfield !important;
  -moz-appearance: textfield !important;
  padding-right: 10px !important;
  width: 110px !important;
}
.jar-card .jar-input::-webkit-outer-spin-button,
.jar-card .jar-input::-webkit-inner-spin-button{
  -webkit-appearance: none !important;
  margin: 0 !important;
}

/* === CHILD PROFILE: ukryj input + Add POD SŁOIKAMI (nadpisanie wszystkich wcześniejszych reguł) === */
body[data-role="child"] .jar-card .jar-actions,
body[data-role="child"] .jar-card .jar-input,
body[data-role="child"] .jar-card .btn { 
  display: none !important; 
}
body[data-role="child"] .jar-card { gap: 6px !important; } /* zgrabne odstępy */

/* === MINI-JARS: telefon = 2 kolumny, czytelne etykiety === */
@media (max-width: 640px){
  #stickyMiniJars{
    display: grid !important;
    grid-template-columns: repeat(2, minmax(0,1fr)) !important;
    gap: 6px 8px !important;
    padding: 6px 8px !important;
  }
  #stickyMiniJars .mini-jar-label{ font-size: .7rem !important; }
  #stickyMiniJars .mini-jar-value{ font-size: .9rem !important; white-space: nowrap !important; }
}

/* === ARROWS przy liczbach: nigdy na tekście === */
.arrow-up,.arrow-down,.arrow-flat{
  display:inline-block !important;
  margin-left: 4px !important;
  position: relative; top: -1px;
}

/* === FX & STOCKS: mobile – nie rozjeżdża się, prawa kolumna wchodzi === */
@media (max-width: 640px){
  #tab-invest .tableWrap, #tab-fx .tableWrap{
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch;
  }
  #tab-invest table, #tab-fx table{
    width: 100% !important;
    min-width: 0 !important;
    table-layout: fixed !important;
  }
  #tab-invest th, #tab-invest td,
  #tab-fx     th, #tab-fx     td{
    padding: 8px 6px !important;
    white-space: nowrap !important;
    text-align: center; vertical-align: middle;
  }

  /* STOCKS – proporcje, mieści się bez overlaya na przyciskach */
  #tab-invest th:nth-child(1), #tab-invest td:nth-child(1){ width:18% !important; text-align:left !important; }
  #tab-invest th:nth-child(2), #tab-invest td:nth-child(2){ width:10% !important; }
  #tab-invest th:nth-child(3), #tab-invest td:nth-child(3){ width:14% !important; }
  #tab-invest th:nth-child(4), #tab-invest td:nth-child(4){ width:14% !important; }
  #tab-invest th:nth-child(5), #tab-invest td:nth-child(5){ width:14% !important; }
  #tab-invest th:nth-child(6), #tab-invest td:nth-child(6){ width:14% !important; padding-right:10px !important; }
  #tab-invest th:nth-child(7), #tab-invest td:nth-child(7){ width:16% !important; } /* Qty + Sell */
  #tab-invest td.space{
    display:flex !important; gap:6px !important; justify-content:flex-end !important; align-items:center !important;
  }

  /* FX – proporcje + szersze „Actions” */
  #tab-fx th:nth-child(1), #tab-fx td:nth-child(1){ width:22% !important; text-align:left !important; }
  #tab-fx th:nth-child(2), #tab-fx td:nth-child(2){ width:12% !important; }  /* Amount */
  #tab-fx th:nth-child(3), #tab-fx td:nth-child(3){ width:14% !important; }  /* Avg */
  #tab-fx th:nth-child(4), #tab-fx td:nth-child(4){ width:14% !important; }  /* Rate */
  #tab-fx th:nth-child(5), #tab-fx td:nth-child(5){ width:16% !important; }  /* Value */
  #tab-fx th:nth-child(6), #tab-fx td:nth-child(6){ width:12% !important; }  /* P/L */
  #tab-fx th:nth-child(7), #tab-fx td:nth-child(7){ width:10% !important; }  /* Actions */
  #tab-fx td.space{
    display:flex !important; gap:6px !important; justify-content:flex-end !important; align-items:center !important;
  }

  /* węższe inputy ilości */
  #tab-invest input[type="number"], #tab-fx input[type="number"]{
    width:72px !important; min-width:72px !important;
  }

  /* Usuń spinnery na mobile globalnie */
  input[type=number]::-webkit-outer-spin-button,
  input[type=number]::-webkit-inner-spin-button{ -webkit-appearance:none !important; margin:0 !important; }
  input[type=number]{ -moz-appearance:textfield !important; appearance:textfield !important; }
}
/* ===== MINI-JARS (MOBILE-ONLY, ≤640px) — 2 rzędy po 5, niski pasek ===== */
@media (max-width: 640px){
  #stickyMiniJars{
    position: sticky !important;
    top: var(--header-h, 56px) !important;  /* pod topbarem */
    z-index: 150 !important;

    display: grid !important;
    grid-template-columns: repeat(5, minmax(0,1fr)) !important; /* 5 na rząd */
    column-gap: 6px !important;
    row-gap: 4px !important;

    padding: 4px 8px !important;
    height: auto !important;       /* brak stałej wysokości */
    margin: 0 !important;
    background: rgba(7,11,22,.72) !important;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border-bottom: 1px solid rgba(255,255,255,.06) !important;
    box-sizing: border-box !important;
  }

  #stickyMiniJars .mini-jar{
    min-width: 0 !important;
    text-align: center !important;
  }
  #stickyMiniJars .mini-jar-label{
    font-size: 11px !important;
    line-height: 1.1 !important;
    color: var(--muted) !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }
  #stickyMiniJars .mini-jar-value{
    font-size: 13px !important;
    font-weight: 800 !important;
    white-space: nowrap !important;
  }
}

/* ===== PORTFOLIO TABELKI (MOBILE-ONLY) — nic nie nachodzi, ewentualny h-scroll ===== */
@media (max-width: 640px){
  #tab-invest .tableWrap, #tab-fx .tableWrap{ overflow-x:auto !important; }
  #tab-invest table,      #tab-fx table     { table-layout:fixed !important; min-width:560px; width:100%; }
  #tab-invest td.space,   #tab-fx td.space  { display:flex !important; gap:6px !important; justify-content:flex-end !important; }
  #tab-invest input[type=number], #tab-fx input[type=number]{ width:72px !important; min-width:72px !important; }
}
/* ===== MOBILE ONLY (≤640px): slim topbar + mini-jars 2×5 ===== */
@media (max-width: 640px){
  :root{ --header-h: 48px !important; }               /* niższy top bar */

  /* TOP BAR – niski i wąskie kapsułki */
  .topbar{
    position: sticky !important;
    top: 0 !important;
    z-index: 200 !important;
    height: var(--header-h) !important;
    padding: 6px 10px !important;
    gap: 6px !important;
  }
  .topbar h1, #t-appTitle{ font-size: 16px !important; }
  .topbar .tab, .topbar button, .topbar select{
    padding: 6px 8px !important;
    font-size: 12px !important;
    line-height: 1.1 !important;
  }
  /* odchudź badge/logowanie */
  .authwrap .tab, .authwrap button{ padding: 6px 8px !important; font-size: 12px !important; }
  /* usuń ewentualne globalne kompensacje */
  body{ padding-top: 0 !important; }

  /* MINI-JARS – 2 wiersze po 5, niski pasek */
  #stickyMiniJars{
    position: sticky !important;
    top: var(--header-h) !important;
    z-index: 150 !important;

    display: grid !important;
    grid-template-columns: repeat(5, minmax(0,1fr)) !important; /* 5 na rząd */
    column-gap: 6px !important;
    row-gap: 2px !important;

    padding: 4px 8px !important;
    height: auto !important;
    background: rgba(7,11,22,.72) !important;
    border-bottom: 1px solid rgba(255,255,255,.06) !important;
  }

  #stickyMiniJars .mini-jar{
    min-width: 0 !important;
    text-align: center !important;
  }
  #stickyMiniJars .mini-jar-label{
    font-size: 10px !important;
    line-height: 1.05 !important;
    color: var(--muted) !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }
  #stickyMiniJars .mini-jar-value{
    font-size: 12.5px !important;
    font-weight: 800 !important;
    white-space: nowrap !important;
  }
}
/* ==== HARD RESET: fixed topbar + fixed mini-jars (działa wszędzie) ==== */
:root{
  --H-TOP: 56px;          /* desktop wysokość topbaru */
  --H-JARS-DESK: 52px;    /* desktop: 1 rząd mini-jars */
  --H-JARS-MOB: 86px;     /* mobile: 2 rzędy mini-jars (5+5) */
}

body{
  padding-top: calc(var(--H-TOP) + var(--H-JARS-DESK)) !important;
}

/* TOPBAR – zawsze fixed, pełna szerokość */
body .topbar{
  position: fixed !important;
  top: 0; left: 0; right: 0;
  height: var(--H-TOP) !important;
  z-index: 1000 !important;
}

/* MINI-JARS – zawsze fixed pod topbarem */
body #stickyMiniJars{
  position: fixed !important;
  top: var(--H-TOP) !important;
  left: 0; right: 0;
  height: var(--H-JARS-DESK) !important;   /* desktop default */
  z-index: 900 !important;

  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  gap: 12px !important;
  padding: 6px 12px !important;
}

/* Nagłówki tabel pod dwoma paskami */
.tableWrap thead th{
  position: sticky !important;
  top: calc(var(--H-TOP) + var(--H-JARS-DESK)) !important;
  z-index: 2 !important;
}

/* ===== MOBILE (≤640px): cieńszy topbar + mini-jars 2×5 ===== */
@media (max-width: 640px){
  :root{ --H-TOP: 48px; }  /* cieńszy pasek na telu */

  body{
    padding-top: calc(var(--H-TOP) + var(--H-JARS-MOB)) !important;
  }

  /* topbar zostaje fixed, tylko niższy */
  body .topbar{
    height: var(--H-TOP) !important;
    padding: 6px 10px !important;
    gap: 6px !important;
  }

  /* mini-jars: 5 kolumn → automatycznie 2 rzędy */
  body #stickyMiniJars{
    height: var(--H-JARS-MOB) !important;
    display: grid !important;
    grid-template-columns: repeat(5, 1fr) !important;
    column-gap: 6px !important;
    row-gap: 2px !important;
    align-content: center !important;
    padding: 4px 8px !important;
  }
  #stickyMiniJars .mini-jar{
    min-width: 0 !important; text-align: center !important;
  }
  #stickyMiniJars .mini-jar-label{
    font-size: 10px !important; line-height: 1.05 !important;
    white-space: nowrap !important; overflow: hidden !important; text-overflow: ellipsis !important;
  }
  #stickyMiniJars .mini-jar-value{
    font-size: 12.5px !important; font-weight: 800 !important; white-space: nowrap !important;
  }

  .tableWrap thead th{
    top: calc(var(--H-TOP) + var(--H-JARS-MOB)) !important;
  }
}
 /* ==== MOBILE ONLY (≤640px): schowaj strzałki w mini-jars ==== */
@media (max-width: 640px){
  /* wszystkie warianty elementów strzałek w pasku */
  #stickyMiniJars [class*="arrow-"],
  .mini-strip     [class*="arrow-"],
  #stickyMiniJars i.arrow-up,
  #stickyMiniJars i.arrow-down,
  .mini-strip  i.arrow-up,
  .mini-strip  i.arrow-down,
  #stickyMiniJars svg.arrow-up,
  #stickyMiniJars svg.arrow-down,
  .mini-strip  svg.arrow-up,
  .mini-strip  svg.arrow-down{
    display: none !important;
    margin: 0 !important;
  }

  /* gdyby strzałki były dodawane jako ::before na wartości */
  #stickyMiniJars .mini-jar-value::before,
  .mini-strip .mini-pill b::before{
    content: "" !important;
    display: none !important;
  }
}
/* ==== MOBILE ONLY (≤640px) — usuń strzałki w pasku mini-jars ==== */
@media (max-width: 640px){
  #stickyMiniJars .arrow-up,
  #stickyMiniJars .arrow-down,
  #stickyMiniJars .arrow-flat,
  .mini-strip .arrow-up,
  .mini-strip .arrow-down,
  .mini-strip .arrow-flat {
    display: none !important;     /* zabija ikonki <i> lub <svg> */
  }

  /* gdyby były wstawiane jako pseudo-elementy */
  #stickyMiniJars .mini-jar-value::before,
  #stickyMiniJars .mini-jar-value::after,
  .mini-strip .mini-pill b::before,
  .mini-strip .mini-pill b::after {
    content: none !important;
    display: none !important;
  }
}
/* ==== 1) HAMBURGER – większy target i ikona ==== */
.mfk-nav-toggle{
  width: 44px !important;
  height: 44px !important;
  padding: 8px !important;
  border-radius: 12px !important;
}

/* jeśli to <svg> lub <i> w środku */
.mfk-nav-toggle svg,
.mfk-nav-toggle i,
.mfk-nav-toggle .icon{
  width: 24px !important;
  height: 24px !important;
  font-size: 24px !important;
}

/* jeśli hamburger jest z <span class="bar"> */
.mfk-nav-toggle .bar{
  display:block;
  width: 24px !important;
  height: 3px !important;
  border-radius: 2px;
  margin: 4px 0 !important;
}

/* ==== 2) MENU NA PIERWSZYM PLANIE (ponad topbar + mini-jars) ==== */
/* Drawer/backdrop */
.mfk-drawer,
.mfk-backdrop{
  position: fixed !important;
  z-index: 5000 !important;          /* > topbar (1000) i mini-jars (900) */
}

/* Gdy używasz osobnego kontenera np. #mfkMobileDrawer */
#mfkMobileDrawer{
  position: fixed !important;
  inset: 0 auto 0 0 !important;      /* lewy off-canvas */
  z-index: 5000 !important;
}

/* Jeśli masz rozwijane menu (dropdown) pod hamburgerem */
.mfk-mobile-menu,                      /* podmień, jeśli masz inny selektor */
#mfkDropMenu{
  position: fixed !important;
  top: var(--H-TOP, 56px) !important;  /* tuż pod topbarem */
  left: 8px !important;
  right: 8px !important;
  z-index: 5001 !important;
}

/* Na wszelki wypadek: nic nie ucina menu */
.topbar, .role-switch{ overflow: visible !important; }
/* ==== Hamburger pełny placeholder ==== */
.mfk-nav-toggle {
  width: 44px;               /* kwadratowy przycisk */
  height: 44px;
  display: flex;             /* centrowanie kresek */
  flex-direction: column;    /* układ pionowy */
  justify-content: center;   /* równe odstępy góra/dół */
  align-items: center;
  gap: 5px;                  /* odstęp między kreskami */
  border-radius: 12px;
}

.mfk-nav-toggle .bar {
  width: 70%;                /* długość kreski względem przycisku */
  height: 3px;               /* grubość */
  background: #fff;          /* kolor (zmień jeśli chcesz) */
  border-radius: 2px;
}
/* === FIX: input + Sell w jednej linii (mobile & desktop) === */
section#tab-invest #portfolioBody td.space,
section#tab-fx      #fxBody        td.space{
  display: flex !important;
  flex-direction: row !important;     /* ⬅️ jedna linia */
  align-items: center !important;
  justify-content: flex-end !important; /* przycisk po prawej */
  gap: 8px !important;
  white-space: nowrap !important;
}

/* kompaktowe inputy, żeby wszystko się mieściło obok siebie */
section#tab-invest #portfolioBody td.space input[type="number"],
section#tab-fx      #fxBody        td.space input[type="number"],
section#tab-invest #portfolioBody td.space .input,
section#tab-fx      #fxBody        td.space .input{
  width: 72px !important;
  min-width: 72px !important;
  text-align: center;
}

/* przycisk nie zawija tekstu */
section#tab-invest #portfolioBody td.space .btn,
section#tab-fx      #fxBody        td.space .btn{
  flex: 0 0 auto !important;
  white-space: nowrap !important;
}

/* na bardzo wąskich telefonach: jeszcze ciaśniej */
@media (max-width: 360px){
  section#tab-invest #portfolioBody td.space,
  section#tab-fx      #fxBody        td.space{
    gap: 6px !important;
  }
  section#tab-invest #portfolioBody td.space input[type="number"],
  section#tab-fx      #fxBody        td.space input[type="number"]{
    width: 64px !important;
    min-width: 64px !important;
  }
}
/* Drawer musi być ponad tłem */
#mfkMobileDrawer,
.mfk-drawer{ z-index: 5001 !important; }

#mfkBackdrop,
.mfk-backdrop{ z-index: 5000 !important; }  /* tło pod spodem */
/* Kliknięcia mają działać w menu; backdrop tylko zamyka */
.mfk-drawer, .mfk-drawer * { pointer-events: auto !important; }
/* === MOBILE HEADER FIT (≤640px) — taller bar === */
@media (max-width: 640px){
  :root{ --H-TOP: 68px !important; }   /* wyższy pasek + auto-kompensacja paddingu body */
  .topbar{
    height: var(--H-TOP) !important;
    padding: 10px 12px !important;
  }
}
/* === Basket tickers/pairs: żadnego nakładania się waluty na telefonie === */
@media (max-width: 640px){
  /* 1) Kapsułka z tickerem/parą – pozwól na dwa wiersze */
  .b-ticker,
  #fx-basket .b-ticker,
  #stock-basket .b-ticker,
  #fx-basket .pair-badge,
  #stock-basket .pair-badge {
    position: relative;
    display: inline-flex !important;
    flex-direction: column;              /* ticker w 1. wierszu, waluta w 2. */
    align-items: center;
    justify-content: center;
    gap: 2px;
    padding: 6px 10px !important;
    min-width: 92px;                     /* żeby kapsułka się nie ściskała */
    line-height: 1.05;
    white-space: normal !important;      /* pozwól łamać wiersz */
  }

  /* 2a) Jeśli „USD” jest pseudo-elementem (np. ::after) – przenieś go POD spód */
  .b-ticker::after,
  #fx-basket .pair-badge::after,
  #stock-basket .pair-badge::after {
    position: static !important;         /* nie absolute */
    transform: none !important;
    display: block !important;
    margin: 0 !important;
    opacity: .9;
    font-size: 12px;                     /* mniejsza waluta */
  }

  /* 2b) Jeśli masz osobny element waluty (np. <span class="cur">USD</span>) */
  .b-ticker .cur,
  #fx-basket .pair-badge .cur {
    display: block !important;
    font-size: 12px !important;
    opacity: .9;
    margin: 0 !important;
  }

  /* 3) Gdy wcześniej dodaliśmy odstęp na prawo pod pseudo-element – wyłącz go */
  .b-ticker{ padding-right: 10px !important; }
}
/* === FIX: Basket ticker + input quantity === */

/* 1) Usuń kreseczkę pod tickerem */
#stock-basket .b-ticker::after,
#fx-basket   .b-ticker::after {
  content: none !important;
  display: none !important;
}

/* 2) Zwęż input ilości w koszyku (Stocks + FX) */
#stock-basket .b-qty .input,
#fx-basket   .b-qty .input {
  width: 64px !important;   /* było 80px+ → teraz ciaśniej */
  min-width: 64px !important;
  text-align: center;
}
/* Usunięcie strzałek w input type=number (Chrome, Edge, Safari, Opera) */
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Usunięcie strzałek w Firefox */
input[type=number] {
  appearance: textfield;       /* standard */
  -moz-appearance: textfield;  /* Firefox */
}
#portfolioBody input::placeholder,
#fxBody input::placeholder {
  color: transparent !important;
  opacity: 0 !important;
}
/* MOBILE: awaryjne ukrycie pseudo-ikonek ::before/::after */
@media (max-width: 640px){
  [style*="--_no-arrows"]::before,
  [style*="--_no-arrows"]::after{
    content: none !important;
    display: none !important;
  }

  /* oraz wszelkie elementy z klasami arrow-* (gdyby JS ich nie zdążył usunąć) */
  [class*="arrow-"]{
    display: none !important;
    visibility: hidden !important;
  }
}
/* MOBILE: koszyki – nic się nie nachodzi, lewy "price" znika (mamy kwotę po prawej) */
@media (max-width:640px){
  #stock-basket .basket-item, #fx-basket .basket-item{
    display:grid !important;
    grid-template-columns: auto 1fr auto auto; /* badge | (elastyczna przerwa) | qty | kwota */
    align-items:center; gap:8px;
  }
  #stock-basket .basket-item > *, #fx-basket .basket-item > *{ min-width:0; }

  /* jeśli pojawia się dodatkowa cena/lewy price – ukryj go na telu */
  #stock-basket .basket-item .b-price:first-child,
  #fx-basket   .basket-item .b-price:first-child{
    display:none !important;
  }

  /* badge bez pozycji absolutnej */
  #stock-basket .b-ticker, #fx-basket .b-ticker{
    position:static !important; white-space:nowrap;
  }
}




